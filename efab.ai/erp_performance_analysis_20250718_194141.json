{
  "analysis_timestamp": "2025-07-18T19:41:41.061393",
  "endpoints_analyzed": 4,
  "successful_fetches": 4,
  "successful_processing": 4,
  "data_quality_average": 0.8875,
  "cache_stats": {
    "entries": 4,
    "size_mb": 0.12141799926757812,
    "max_size_mb": 256.0,
    "utilization": 0.00047428905963897705,
    "total_accesses": 3,
    "avg_accesses": 0.75
  },
  "raw_data": {
    "/yarn": {
      "content": "<!doctype html>\n<!--[if lt IE 7]>      <html class=\"no-js lt-ie9 lt-ie8 lt-ie7\" lang=\"\"> <![endif]-->\n<!--[if IE 7]>         <html class=\"no-js lt-ie9 lt-ie8\" lang=\"\"> <![endif]-->\n<!--[if IE 8]>         <html class=\"no-js lt-ie9\" lang=\"\"> <![endif]-->\n<!--[if gt IE 8]><!--> <html class=\"no-js\" lang=\"\"> <!--<![endif]-->\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <title>eFab</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"stylesheet\" href=\"/css/cfab.css\">\n  <link rel=\"stylesheet\" href=\"/css/print.css\" media=\"print\">\n  <link rel=\"stylesheet\" href=\"/css/vendor/font-awesome.min.css\">\n  <script src=\"/js/vendor/jquery.min.js\"></script>\n  <script src=\"/js/vendor/jquery.growl.js\"></script>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/vendor/jquery.growl.css\" />\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/vendor/dx.common.css\" />\n  <link rel=\"dx-theme\" data-theme=\"generic.light\" href=\"/css/vendor/dx.light.css\" />\n  <script src=\"/js/vendor/jszip.min.js\"></script>\n  <script src=\"/js/vendor/mousetrap.min.js\"></script>\n  <script src=\"/js/vendor/dx.all.js\"></script>\n  <script src=\"/js/vendor/foundation.min.js\"></script>\n  <script src=\"/js/efab.js\"></script>\n  <script>\n    function integerWithCommas(x) {\n      if (x) {\n        return parseInt(x).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      } else {\n        return '';\n      }\n    }\n    $(function() {\n      // ShortCuts\n      Mousetrap.bind('s', function() { $('input[name=search_string]').select(); return false; });\n    });\n  </script>\n\n  <script>\n    // jQuery plugin to prevent double submission of forms\n    jQuery.fn.preventDoubleSubmission = function() {\n      var $form = $(this);\n\t   // Only add this function once!\n\t   if ($form.data('function_added') === true) {\n\t\t  return this;\n\t\t} else {\n\t\t  $form.data('function_added', true);\n\t\t}\n      $(this).on('submit',function(e){\n        if ($form.data('submitted') === true) {\n          // Previously submitted - don't submit again\n          alert('Please do not double click on buttons.  Thanks!');\n          e.preventDefault();\n        } else {\n          // Mark it so that the next submit can be ignored\n          $form.data('submitted', true);\n          $('button.changeOnSubmit').text('Submitting...');\n        }\n      });\n      // Keep chainability\n      return this;\n    };\n\n    \n  </script>\n</head>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<body>\n\n<!--[if lt IE 8]>\n  <p class=\"browserupgrade\">You are using an <strong>outdated</strong> browser. Please <a href=\"http://browsehappy.com/\">upgrade your browser</a> to improve your experience.</p>\n<![endif]-->\n\n\n  <div class=\"pageContainer\">\n    \n<header>\n  <div class=\"logo\">\n    <img src=\"/img/eFab-Logo-Rev.png\">\n  </div>\n  \n  <div class=\"noJobTab\">\n    <form id=\"search_form\" action=\"/search\" method=\"post\">\n      <input class=\"search allowSubmitOnEnter\" name=\"search_string\" type=\"input\" placeHolder=\"Search\" onkeydown=\"searchKeyDown(event, this);\">\n    </form>\n  </div>\n  \n  <div class=\"subNav\" align=\"right\">\n    <ul>\n      <li><a href=\"/logout\" title=\"Log Out\">Log Out</a></li>\n      <li><a href=\"#\" title=\"Change Password\">My Account</a></li>\n     \n      <li><a href=\"/admin\" title=\"Admin\">Admin</a></li>\n     \n  \n      <li><a href=\"/\" title=\"Jobs List\" title=\"Home\">CFAB <i class=\"fa fa-home\"></i></a></li>\n    </ul>\n  </div>\n  \n  <script>\n    $(document).ready(function() {\n      /* Set the number of Alerts */\n      $('#alertBell').addClass('showBell').attr('data-after',4);\n\n      /* Set the button action to close a job folder */\n      $('#clear-job').on('click', function() {\n        $.ajax({\n          url: '/api/clear-job',\n          type: 'POST',\n          success: function(data) {\n            $('.jobTab').hide();\n            $('.mainContent').removeClass('manila');\n          },\n          error: function(event, stat, error) {\n            var str = 'JSON request failed. Status: ' + stat + ' Error: ' + error;\n            console.log(str);\n          },\n        });\n      });\n    });\n  </script>\n  \n</header>\n\n    <div class=\"mainContainer\">\n      <div class=\"mainNav\">\n        \n\n<nav></nav>\n<div id=\"navDetails\" class=\"hidden\">\n  <div class=\"name\"></div>\n</div>\n<div class=\"favorites-nav\" style=\"width: 200px !important\"></div>\n\n<script>\nvar menuData = [\n  {\n    id: \"10\",\n    name: \"Dashboard\",\n    link: \"/dashboard\",\n    disabled: 0,\n  }, {\n    id: \"20\",\n    name: \"Sales Orders\",\n    link: \"/fabric/so/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"20_1\",\n        name: \"List\",\n        link: \"/fabric/so/list\",\n        disabled: 0,\n      }, {\n        id: \"20_2\",\n        name: \"Finished Create\",\n        link: \"/fabric/sop/create\",\n        disabled: 0,\n      }, {\n        id: \"20_3\",\n        name: \"Greige Create\",\n        link: \"/fabric/gsop/create\",\n        disabled: 0,\n      }, {\n        id: \"20_4\",\n        name: \"Returns\",\n        link: \"/return/list\",\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"30\",\n    name: \"Inventory\",\n    link: \"/yarn\",\n    disabled: 0,\n    items: [\n      {\n        id: \"30_1\",\n        name: \"Yarn\",\n        link: \"/yarn\",\n        disabled: 0,\n      }, {\n        id: \"30_2\",\n        name: \"G00\",\n        link: \"/fabric/greige/list/g00\",\n        disabled: 0,\n      }, {\n        id: \"30_3\",\n        name: \"G02\",\n        link: \"/fabric/greige/list/g02\",\n        disabled: 0,\n      }, {\n        id: \"30_3_1\",\n        name: \"G04\",\n        link: \"/fabric/greige/list/g04\",\n        disabled: 0,\n      }, {\n        id: \"30_3_2\",\n        name: \"G09\",\n        link: \"/fabric/greige/list/g09\",\n        disabled: 0,\n      }, {\n        id: \"30_4\",\n        name: \"I01\",\n        link: \"/fabric/finished/list/i01\",\n        disabled: 0,\n      }, {\n        id: \"30_5\",\n        name: \"F01\",\n        link: \"/fabric/finished/list/f01\",\n        disabled: 0,\n      }, {\n        id: \"30_5a\",\n        name: \"F02\",\n        link: \"/fabric/finished/list/f02\",\n        disabled: 0,\n      }, {\n        id: \"30_5b\",\n        name: \"F04\",\n        link: \"/fabric/finished/list/f04\",\n        disabled: 0,\n      }, {\n        id: \"30_5c\",\n        name: \"F05\",\n        link: \"/fabric/finished/list/f05\",\n        disabled: 0,\n      }, {\n        id: \"30_5d\",\n        name: \"F06\",\n        link: \"/fabric/finished/list/f06\",\n        disabled: 0,\n      }, {\n        id: \"30_5e\",\n        name: \"F07\",\n        link: \"/fabric/finished/list/f07\",\n        disabled: 0,\n      }, {\n        id: \"30_6\",\n        name: \"F08\",\n        link: \"/fabric/finished/list/f08\",\n        disabled: 0,\n      }, {\n        id: \"30_7\",\n        name: \"F09\",\n        link: \"/fabric/finished/list/f09\",\n        disabled: 0,\n      }, {\n        id: \"30_8\",\n        name: \"P01\",\n        link: \"/fabric/finished/list/p01\",\n        disabled: 0,\n      }, {\n        id: \"30_8a\",\n        name: \"S01\",\n        link: \"/fabric/finished/list/s01\",\n        disabled: 0,\n      }, {\n        id: \"30_8b\",\n        name: \"T01\",\n        link: \"/fabric/finished/list/t01\",\n        disabled: 0,\n      }, {\n        id: \"30_9\",\n        name: \"BH\",\n        link: \"/fabric/finished/list/bh\",\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"40\",\n    name: \"Inquiry\",\n    link: \"/styles/inquiry\",\n    disabled: 0,\n  },{\n    id: \"50\",\n    name: \"Supply Orders\",\n    link: \"/yarn/po/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"50_1\",\n        name: \"Yarn POs List\",\n        link: \"/yarn/po/list\",\n        disabled: 0,\n      }, {\n        id: \"50_2\",\n        name: \"Yarn Demand Create\",\n        link: \"/yarn/po/create\",\n        disabled: 0,\n      }, {\n        id: \"50_3\",\n        name: \"Greige POs List\",\n        link: \"/fabric/gpo/list\",\n        disabled: 0,\n      }, {\n        id: \"50_4\",\n        name: \"Greige PO Create\",\n        link: \"/fabric/gpo/create\",\n        disabled: 0,\n      }, {\n        id: \"50_5\",\n        name: \"Finshed POs List\",\n        link: \"/fabric/fpo/list\",\n        disabled: 0,\n      }, {\n        id: \"50_6\",\n        name: \"Finished PO Create\",\n        link: \"/fabric/fpo/create\",\n        disabled: 0,\n      }, {\n        id: \"50_7\",\n        name: \"Finished\",\n        link: \"/fabric/finished/po/list\",\n        disabled: 0,\n      }\n    ],\n  },{\n    id: \"60\",\n    name: \"Work Orders\",\n    link: \"/fabric/knitorder/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"60_1\",\n        name: \"Knit Orders List\",\n        link: \"/fabric/knitorder/list\",\n        disabled: 0,\n      }, {\n        id: \"60_2\",\n        name: \"Knit Order Create\",\n        link: \"/fabric/knitorder/create\",\n        disabled: 0,\n      }, {\n        id: \"60_3\",\n        name: \"Dye Order List\",\n        link: \"/fabric/dyeorder/list\",\n        disabled: 0,\n      }, {\n        id: \"60_4\",\n        name: \"Shipped Dye Orders\",\n        link: \"/fabric/dyeorder/shipped_list\",\n        disabled: 0,\n      }, {\n        id: \"60_5\",\n        name: \"Dye Order Plan Create\",\n        link: \"/fabric/dop/create\",\n        disabled: 0,\n      }, {\n        id: \"60_6\",\n        name: \"Rework Dye Order Plan Create\",\n        link: \"/fabric/dop/create/rework\",\n        disabled: 0,\n      }, {\n        id: \"60_7\",\n        name: \"Production Planning\",\n        link: \"/production/\",\n        disabled: 0,\n        disabled: true,\n      }\n    ],\n  },{\n    id: \"70\",\n    name: \"Ship Orders\",\n    link: \"/ship\",\n    disabled: 0,\n  },{\n    id: \"80\",\n    name: \"SO Ship Queue\",\n    link: \"/ship/so_queue\",\n    disabled: 0,\n  },{\n    id: \"90\",\n    name: \"Accounting\",\n    link: \"/accounting/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"90_1\",\n        name: \"Receivables\",\n        disabled: 0,\n        items: [\n          {\n            id: '90_1a',\n            name: 'Invoices',\n            link: \"/accounting/list\",\n            disabled: 0,\n        \n          }, {\n            id: '90_1b',\n            name: 'Cash Receipts',\n            link: \"/accounting/cash\",\n            disabled: 0,\n        \n          }\n        ],\n      }, {\n        id: \"90_2\",\n        name: \"DO Accounts Payable\",\n        disabled: 0,\n        items: [\n          {\n            id: \"90_2a\",\n            name: \"Payables List\",\n            link: \"/accounting/do_payables\",\n            disabled: 0,\n          }, {\n            id: \"90_2b\",\n            name: \"Create Payables Invoice\",\n            link: \"/accounting/do_payables/pinv_create\",\n            disabled: 0,\n          }, {\n            id: \"90_2c\",\n            name: \"Completed Payables Invoices\",\n            link: \"/accounting/do_payables/completed_list\",\n            disabled: 0,\n          }, {\n            id: \"90_2d\",\n            name: \"Paid w/ No Finished Fab\",\n            link: \"/accounting/do_payables/paid_no_finfab\",\n            disabled: 0,\n          }, {\n            id: \"90_2e\",\n            name: \"Could Not Upload\",\n            link: \"/accounting/do_payables/no_upload_list\",\n            disabled: 0,\n          },   \n        ]\n      }, {\n        id: \"90_3\",\n        name: \"Yarn Accounts Payable\",\n        disabled: 0,\n        items: [\n          {\n            id: \"90_3a\",\n            name: \"Payables List\",\n            link: \"/accounting/yarn_payables\",\n            disabled: 0,\n          }, {\n            id: \"90_3b\",\n            name: \"Create Payables Invoice\",\n            link: \"/accounting/yarn_payables/pinv_create\",\n            disabled: 0,\n          }, {\n            id: \"90_3c\",\n            name: \"Completed Payables Invoices\",\n            link: \"/accounting/yarn_payables/completed_list\",\n            disabled: 0,\n//          }, {\n//            id: \"90_3d\",\n//            name: \"Paid w/ No Yarn Received\",\n//            link: \"/accounting/yarn_payables/paid_no_rcvd\",\n//            disabled: 0,\n          }, {\n            id: \"90_2e\",\n            name: \"Could Not Upload\",\n            link: \"/accounting/yarn_payables/no_upload_list\",\n            disabled: 0,\n          }\n        ]\n    \n      }, {\n        id: \"90_4\",\n        name: \"Sales Commissions\",\n        disabled: 0,\n        link: \"/accounting/sales_commissions\",\n    \n      }\n    ]\n  },{\n    id: \"100\",\n    name: \"Styles\",\n    link: \"/styles/list\",\n    disabled: 0,\n    items: [\n      {\n        id: '100_1',\n        name: 'Styles',\n        link: '/styles/list',\n        disabled: 0,\n      }, {\n        id: '100_2',\n        name: 'Customer Style Codes',\n        link: '/customer_styles',\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"110\",\n    name: \"Customers\",\n    link: \"/customer/list\",\n    disabled: 0,\n  },{\n    id: \"120\",\n    name: \"Reports\",\n    link: \"/reports/sales_activity\",\n    disabled: 0,\n    items: [\n      { id : \"120_0\",\n        name: \"Reports Queue\",\n        link: \"/reports/report_queue\",\n        disabled: 0, \n      },\n      {\n        id: \"120_1\",\n        name: \"Sales\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_1a\",\n            name: \"Sales Activity\",\n            link: \"/reports/sales_activity\",\n            disabled: 0,\n          },\n          {\n            id: \"120_1b\",\n            name: \"Cut & Sew Transfers\",\n            link: \"/reports/cut_and_sew\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_2\",\n        name: \"Monthly\",\n        link: \"/reports/rack/by_rack_summary\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_2a\",\n            name: \"Inventory Activity (trans)\",\n            link: \"/reports/inventory_activity\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2b\",\n            name: \"Inventory Snapshot (roll)\",\n            link: \"/reports/inventory_snapshot\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2c\",\n            name: \"Work Order Inventory Activity (ko/do)\",\n            link: \"/reports/workorder\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2d\",\n            name: \"Inventory Summary\",\n            link: \"/reports/inventory_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2e\",\n            name: \"Journal Entry\",\n            link: \"/reports/journal_entry\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2f\",\n            name: \"Reporting Anomalies\",\n            link: \"/reports/report_anomalies\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2g\",\n            name: \"History-Changing Transactions\",\n            link: \"/reports/history_changers\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2h\",\n            name: \"Snapshot Working Loss\",\n            link: \"/reports/snapshot_working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2i\",\n            name: \"Prepaid Finishing\",\n            link: \"/reports/prepaid_finishing\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_3\",\n        name: \"Yarns\",\n        link: \"/report/yarn_transaction\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_3a\",\n            name: \"Transactions\",\n            link: \"/report/yarn_transaction\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3b\",\n            name: \"Actual Receipts\",\n            link: \"/reports/yarn_receipt\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3c\",\n            name: \"Expected Receipts\",\n            link: \"/report/expected_yarn\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3d\",\n            name: \"Costing Summary\",\n            link: \"/reports/yarn_costing_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3d_2\",\n            name: \"Costing Detail\",\n            link: \"/reports/yarn_costing_detail\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3e\",\n            name: \"Valuation Report\",\n            link: '/reports/yarn_valuation',\n            disabled: 0,\n          },\n          {\n            id: \"120_3f\",\n            name: \"Yarn in G00\",\n            link: '/reports/yarn_in_g00',\n            disabled: 0,\n          },\n          {\n            id: \"120_3g\",\n            name: \"Yarn Accrual\",\n            link: '/reports/yarn_accrual',\n            disabled: 0,\n          },\n          {\n            id: \"120_3h\",\n            name: \"Depletion Adjustments\",\n            link: '/reports/depletion_adjustment',\n            disabled: 0,\n          },\n          {\n            id: \"120_3i\",\n            name: \"Manual Adjustments\",\n            link: '/reports/yarn_adjustment',\n            disabled: 0,\n          },\n          {\n            id: \"120_3j\",\n            name: \"Prior-Period Adjustments\",\n            link: '/report/yarn_prior_period',\n            disabled: 0,\n          },\n          {\n            id: \"120_3k\",\n            name: \"Yarn Demand by Style\",\n            link: '/report/yarn_demand',\n            disabled: 0,\n          },\n          {\n            id: \"120_3l\",\n            name: \"Yarn Demand Summary\",\n            link: '/report/yarn_demand_summary',\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_4\",\n        name: \"Fin Work Loss\",\n        link: \"/reports/working_loss\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_4a\",\n            name: \"Standard\",\n            link: \"/reports/working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_4b\",\n            name: \"NSA\",\n            link: \"/reports/nsa_working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_4c\",\n            name: \"Discrepancy\",\n            link: \"/reports/working_loss_discrep\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_5\",\n        name: \"Rack Sheets\",\n        link: \"/reports/rack/by_rack_summary\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_5a\",\n            name: \"By Rack Summary\",\n            link: \"/reports/rack/by_rack_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5b\",\n            name: \"By Rack Detail\",\n            link: \"/reports/rack/by_rack_detail\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5c\",\n            name: \"By Style Summary\",\n            link: \"/reports/rack/by_style_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5d\",\n            name: \"I01 Detail\",\n            link: \"/reports/rack/io1_by_do_detail\",\n            disabled: 0,\n          }\n        ]\n      }\n    ]\n  }\n];\n\n$(function(){\n  var favData = [\n    { id: 1, text: \"Test Favorite Item 1\", icon: \"group\" },\n  ];\n\n  var $testNav = $('div.favorites-nav');\n\n  let favMenuList = '';\n  favData.map((listItem) => {\n    favMenuList = favMenuList + `<li><a href='#'>${listItem.text}</a></li>`;\n  });\n\n  $testNav.html(`\n    <h3>Favorites</h3>\n    <ul>${favMenuList}</ul>\n  `);\n  \n  var $favButton = $('#favButton, #favButton i.fa-star');\n  var $favMenuIcon = $('#favButton i.fa-star');\n  var $testNavElements = $('div.favorites-nav *');\n\n\n  $('body').off().on('click', function (e) {\n    const $target = $(e.target);\n    if ($target.is($favButton)) {\n      $testNav.toggle();\n      $favMenuIcon.toggleClass('active');\n    } else if ($testNav.css('display') !== 'none' && !$target.is($testNav) && !$target.is($testNavElements)) {\n      $testNav.hide();\n      $favMenuIcon.removeClass('active');\n    }\n  });\n\n\n  // Main nav dxMenu\n  var dxMenu = $(\"nav\").dxMenu({\n    dataSource: menuData,\n    hideSubmenuOnMouseLeave: true,\n    showFirstSubmenuMode: {\n      name: 'onHover',\n      delay: {\n        show: 0,\n        hide: 400,\n      }\n    },\n    displayExpr: 'name',\n    orientation: 'vertical',\n    onItemClick: function (data) {\n      var item = data.itemData;\n      if(item.link) {\n        window.location.href = item.link;\n      }\n    },\n  }).dxMenu(\"instance\");\n\n  \n});\n</script>\n\n      </div>\n      <div class=\"mainContent\">\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n  <script>\n    $(function() {\n      $('nav .dx-menu-vertical ul li:nth-of-type(3)').addClass('active');\n    });\n  </script>\n  \n\n<div class=\"mainContentWrapper\">\n  <div class=\"grid-x\">\n    <div class=\"cell small-6\">\n      <h4>Inventory</h4>\n    </div>\n    <div class=\"cell small-3\"><p style=\"text-align: right;\">use Ctrl-F to search</p></div>\n    <div class=\"cell\" style=\"margin-bottom: 5px;\">\n      \n \n  <a href=\"/yarn\"                   class=\"button tabButton active\">Yarn</a>\n  <a href=\"/fabric/greige/list/g00\"  class=\"button tabButton\">G00</a>\n  <a href=\"/fabric/greige/list/g02\"  class=\"button tabButton\">G02</a>\n  <a href=\"/fabric/greige/list/g04\"  class=\"button tabButton\">G04</a>\n  <a href=\"/fabric/greige/list/g09\"  class=\"button tabButton\">G09</a>\n \n  <a href=\"/fabric/finished/list/i01\"    class=\"button tabButton\">I01</a>\n  <a href=\"/fabric/finished/list/f01\"    class=\"button tabButton\">F01</a>\n  <a href=\"/fabric/finished/list/f02\"    class=\"button tabButton\">F02</a>\n  <a href=\"/fabric/finished/list/f04\"    class=\"button tabButton\">F04</a>\n  <a href=\"/fabric/finished/list/f05\"    class=\"button tabButton\">F05</a>\n  <a href=\"/fabric/finished/list/f06\"    class=\"button tabButton\">F06</a>\n  <a href=\"/fabric/finished/list/f07\"    class=\"button tabButton\">F07</a>\n  <a href=\"/fabric/finished/list/f08\"    class=\"button tabButton\">F08</a>\n  <a href=\"/fabric/finished/list/f09\"    class=\"button tabButton\">F09</a>\n  <a href=\"/fabric/finished/list/p01\"    class=\"button tabButton\">P01</a>\n  <a href=\"/fabric/finished/list/s01\"    class=\"button tabButton\">S01</a>\n  <a href=\"/fabric/finished/list/t01\"    class=\"button tabButton\">T01</a>\n  <a href=\"/fabric/finished/list/bh\"    class=\"button tabButton\">BH</a>\n\n    </div>\n  </div>\n  \n  <div class=\"gridContainer\">\n    <div id=\"yarnInventory\" class=\"gridScroll\"></div>\n  </div>\n  <div id=\"popupFormDiv\"></div>\n</div>\n\n\n<div id=\"yarnInfoPopup\"></div>\n\n<style>\n#yarnInfoPopup { display: none; }\n</style>\n\n<script>\nfunction yarnInfo(descNumber) {\n  $.when(\n    $.getJSON(\"/api/yarn/desc_number/\"+descNumber)\n  ).done(function(d1) {\n    $('#yarnInfoPopup').dxPopup({\n      width: 700,\n      height: 600,\n      showTitle: true,\n      title: \"Yarn Information\",\n      visible: false,\n      dragEnabled: true,\n      closeOnOutsideClick: true,\n      contentTemplate: function() {\n        var markup=\"<table>\";\n        markup += \"<table><tr><td>DSDESC</td><td>Description number</td><td>\" + d1.desc_number + \"</td></tr>\";\n        markup += \"<tr><td>CVEND</td><td>Yarn supplier</td><td>\" + d1.yarn_supplier.name + \"</td></tr>\";\n        markup += \"<tr><td>TYPE</td><td>Type</td><td>\" + d1.yarn_type.name + \"</td></tr>\";\n        markup += \"<tr><td>YARNSZ</td><td>Ply</td><td>\" + d1.ply + \"</td></tr>\";\n        markup += \"<tr><td>YARNSX</td><td>Size</td><td>\" + d1.ply + \"</td></tr>\";\n        markup += \"<tr><td>COLNAM</td><td>Color name</td><td>\" + d1.color_name + \"</td></tr>\";\n        markup += \"<tr><td>COLNUM</td><td>Color number</td><td>\" + d1.color_num + \"</td></tr>\";\n        markup += \"<tr><td>FILA</td><td>Filament</td><td>\" + d1.filament + \"</td></tr>\";\n        markup += \"<tr><td>RS</td><td>Spinning system</td><td>\" + d1.spinning_system + \"</td></tr>\";\n        markup += \"<tr><td>BLEND</td><td>Blend</td><td>\" + d1.blend + \"</td></tr>\";\n        markup += \"<tr><td>CONE</td><td>Cone weight</td><td>\" + d1.cone_wt + \"</td></tr>\";\n        markup += \"<tr><td>DESF1</td><td>Polartec ID</td><td>\" + d1.polartec_id + \"</td></tr></table>\";\n        return markup;\n      },\n    }).dxPopup('instance').show();\n  });\n}\n</script>\n\n\n<style>.onOrder a { text-decoration: underline; }</style>\n<script>\n\nconst yarns = new DevExpress.data.CustomStore({\n  load: function(loadOptions) {\n    return $.getJSON('/api/yarn/active');\n  },\n});\n\n$(function(){\n  $(\"#yarnInventory\").dxDataGrid({\n    dataSource: yarns,\n    height: $(window).height() - 150,\n    minHeight: 400,\n    allowColumnReordering: false,\n    allowColumnResizing: true,\n    columnAutoWidth: true,\n    columnChooser: {\n      enabled: true,\n      mode: \"select\"\n    },\n    columnFixing: { \n      enabled: true\n    },\n    filterRow: { visible: true },\n    filterPanel: { visible: false },\n    headerFilter: { visible: true },\n    grouping: {\n      autoExpandAll: true,\n    },\n    groupPanel: {\n      visible: true,\n    },\n    scrolling: {\n      mode: \"virtual\",\n    },\n    \"export\": {\n      enabled: true,\n      fileName: \"yarn_inventory\",\n      allowExportSelectedData: true\n    },\n    columns: [\n      {\n        type: \"buttons\",\n        width: 50,\n        alignment: \"center\",\n        fixed: true,\n        buttons: [\n          {\n            hint: \"Adjust Inventory\",\n            icon: \"fa fa-calculator\",\n            onClick: function(e) {\n              adjustInventory(e.row.data);\n            }\n          },\n        ],\n      }, {\n        dataField: \"desc_number\",\n        caption:   \"Desc#\",\n        fixed: true,\n        minWidth: 70,\n        cellTemplate: function (container, options) {\n          $('<button onClick=\"yarnInfo('+options.row.data.desc_number+');\" style=\"text-decoration: underline;\">').text(options.value)\n          .appendTo(container);\n        },\n      }, {\n        dataField: 'qs_yarn_customer_code',\n        caption:   'QS Cust',\n        dataType:  'text',\n      }, {\n        dataField: \"supplier\",\n        caption:   \"Supplier\",\n        width: 120,\n      }, {\n        dataField: \"description\",\n        caption: \"Description\",\n        width: 300,\n      }, {\n        dataField: \"color_name\",\n        caption: \"Color\",\n        width: 100,\n      }, {\n        dataField: \"reconciled_qty\",\n        caption:   \"Beginning Balance\",\n        dataType: \"number\",\n        format: {\n          type:      \"fixedPoint\",\n          precision: 2\n        },\n        minWidth: 90,\n      }, {\n        dataField: \"added\",\n        caption:   \"Received\",\n        dataType: \"number\",\n        format: {\n          type:      \"fixedPoint\",\n          precision: 2\n        },\n        minWidth: 60,\n      }, {\n        dataField: \"consumed\",\n        caption:   \"Consumed\",\n        dataType: \"number\",\n        format: {\n          type:      \"fixedPoint\",\n          precision: 2\n        },\n        minWidth: 90,\n      }, {\n        dataField: \"adjustments\",\n        caption:   \"Adjustments\",\n        dataType: \"number\",\n        format: {\n          type:      \"fixedPoint\",\n          precision: 2\n        },\n        minWidth: 70,\n      }, {\n        dataField: \"t_balance\",\n        caption:   \"Theoretical Balance\",\n        dataType: \"number\",\n        format: {\n          type:      \"fixedPoint\",\n          precision: 2 \n        },\n        minWidth: 70,\n        calculateCellValue: function(rowData) {\n          return parseFloat(rowData.reconciled_qty || 0)\n            + parseFloat(rowData.added || 0)\n            + parseFloat(rowData.consumed || 0)\n            + parseFloat(rowData.adjustments || 0);\n        }\n      }, {\n        dataField: \"misc\",\n        dataType: \"string\",\n        caption: \"Misc\",\n      }, {\n        dataField: \"onorder\",\n        caption:   \"On Order\",\n        calculateSortValue: \"onorder\",\n        cssClass: \"onOrder\",\n        cellTemplate: function (container, options) {\n          $('<span style=\"display: block; text-align: right;\">')\n          .append($(\"<a>\", { \"href\": '/yarn/po/list/desc/' + options.data.desc_number }).html( integerWithCommas(options.value)))\n          .appendTo(container);\n        },\n        dataType: \"number\",\n        format: {\n          type:      \"fixedPoint\",\n          precision: 2\n        },\n        minWidth: 90,\n      }, {\n        dataField: \"allocated\",\n        caption:   \"Allocated\",\n        dataType: \"number\",\n        format: {\n          type:      \"fixedPoint\",\n          precision: 2\n        },\n        minWidth: 80,\n        encodeHtml: false,\n        calculateDisplayValue: function(rowData) {\n          if (rowData.allocated != 0) {\n            return `<a href=\"/yarn/ko_list/${rowData.desc_number}\" target=\"_blank\">${rowData.allocated}</a>`;\n          }\n            return 0;\n        }\n      }, {\n        dataField: \"pbalance\",\n        caption:   \"Planning Balance\",\n        dataType: \"number\",\n        format: {\n          type:      \"fixedPoint\",\n          precision: 2 \n        },\n        minWidth: 70,\n        calculateCellValue: function(rowData) {\n          return parseFloat(rowData.reconciled_qty || 0)\n            + parseFloat(rowData.added || 0)\n            + parseFloat(rowData.consumed || 0)\n            + parseFloat(rowData.adjustments || 0)\n            + parseFloat(rowData.onorder || 0)\n            + parseFloat(rowData.allocated || 0);\n        }\n      }, {\n        dataField: \"reconciled_date\",\n        caption:   \"Reconcile Date\",\n        dataType:  \"date\",\n        minWidth: 110,\n        calculateDisplayValue: function(rowData) {\n           if (rowData.reconciled_date == \"1970-01-01 00:00:00\" || !rowData.reconciled_date ) {\n             return \"Never\";\n           } else {\n             return rowData.reconciled_date.substring(0,10);\n           }\n        },\n      }, {\n        dataField: \"cost_avg\",\n        caption:   \"Cost/Pound\",\n        format: {\n          type:      \"currency\",\n          precision: 2\n        },\n        minWidth: 100,\n        calculateCellValue: function(rowData) {\n          return parseFloat(rowData.cost_avg || 0);\n        }\n      }, {\n        dataField: \"cost_total\",\n        caption:   \"Total Cost\",\n        format: {\n          type:      \"currency\",\n          precision: 2\n        },\n        minWidth: 100,\n        calculateCellValue: function(rowData) {\n           return parseFloat(rowData.cost_avg || 0) * \n            (parseFloat(rowData.reconciled_qty || 0)\n              + parseFloat(rowData.added || 0)\n              + parseFloat(rowData.consumed || 0)\n              + parseFloat(rowData.adjustments || 0));\n        }\n      }\n    ],\n    onToolbarPreparing: function(e) {\n      var dataGrid = e.component;\n      e.toolbarOptions.items.unshift({\n        location: \"before\",\n        widget: \"dxButton\",\n        options: {\n          icon: \"column-chooser\",\n          onClick: function() {\n            e.component.showColumnChooser();\n          }\n        }\n      })\n    },\n    onExporting: function(e) {\n      e.component.beginUpdate();\n      e.component.columnOption(\"desc_number\",\"visible\",true);\n      e.component.columnOption(\"on_order\",\"visible\",true);\n    },\n    onExported: function(e) {\n      e.component.columnOption(\"desc_number\",\"visible\",false);\n      e.component.columnOption(\"on_order\",\"visible\",false);\n      e.component.endUpdate();\n    }\n  });\n});\n\nfunction adjustInventory(thisYarn) {\n  var adjustmentPopup= $(\"#popupFormDiv\").dxPopup({\n    visible: true,\n    title: 'Adjust Inventory for Yarn #' + thisYarn.desc_number,\n    minwidth: 400,\n    minheight: 350,\n    position: {\n      my: 'center',\n      at: 'center',\n      of: window\n    },\n    dragEnabled: true,\n    contentTemplate: function(e) {\n      var formContainer = $(\"<div id='subForm'>\");\n      var myAdjustForm = formContainer.dxForm({\n        readOnly: false,\n        showColonAfterLabel: false,\n        labelLocation: \"left\",\n        colCount: 2,\n        items: [\n          {\n            itemType: \"group\",\n            items: [\n              {\n                dataField: \"delta\",\n                label: { text: \"Change Quantity\" },\n                editorType: \"dxTextBox\",\n                validationRules: [{\n                  type: \"required\",\n                  message: \"You must enter a quantity change\"\n                }]\n\n              }, {\n                dataField: \"note\",\n                label: { text: \"Note\" },\n                editorType: \"dxTextBox\",\n                validationRules: [{\n                  type: \"required\",\n                  message: \"You must enter a note\"\n                }]\n              }, {\n                itemType: \"button\",\n                horizontalAlignment: \"right\",\n                buttonOptions: {\n                  text: \"Save Adjustment\",\n                  type: \"success\",\n                  useSubmitBehavior: false,\n                  onClick: function() {\n                    var result = myAdjustForm.validate();\n                    if (result.isValid) {\n                      data = myAdjustForm.option(\"formData\");\n                      data.yarn = thisYarn.desc_number;\n                      var json = JSON.stringify(data);\n                      $.ajax({\n                       type: \"POST\",\n                       data : json,\n                       url: \"/api/yarn/adjust\",\n                       contentType: \"application/json\"\n                      }).done(function(data) {\n                        console.log('success, done, data received=',data);\n                      }).fail(function(data) {\n                        console.log('fail',data);\n                        alert('Something went wrong.  Please call Neal Berry of Clearbuilt.  770-614-8728');\n                      }).always(function() {\n                        console.log('complete');\n                        adjustmentPopup.hide();\n                        location.reload();\n                      });\n                    }\n                  }\n                }\n              }\n            ]\n          }\n        ]\n      }).dxForm(\"instance\");\n      e.append(formContainer);\n    }\n }).dxPopup(\"instance\");\n}\n</script>\n</div>\n    </div>\n    \n  </div>\n\n  <script>$(document).foundation();</script>\n</body>\n</html>\n\n\n\n\n<script type=\"text/javascript\">\n    $( document ).ready(function() {\n        \n        \n    \n    \n        var fullURL = window.location;\n        var baseURL = fullURL.protocol + \"//\" + fullURL.host;\n        var timer = setInterval(\n            function() {\n            \n            },\n            60000\n        );\n\n        function finishJob( job_id, job_type ) {\n            clearInterval(timer);\n\n            var actionURL;\n            switch( job_type ) {\n                \n                case 'yarn_reconcile_import':\n                    actionURL = '/admin/reconcile_results/' + job_id;\n                    break;\n                \n                default:\n                    return;\n            }\n\n            var finishURL = baseURL + actionURL;\n            $.ajax({\n                url: finishURL,\n                type: 'GET',\n                success: function( data ) {\n                    if( data.error === 1 ) {\n                        $.growl({ message: data.message, style: \"error\", title: \"Error!\", fixed: true });\n                    } else {\n                        $.growl({ message: data.message, style: \"notice\", title: \"Success!\", fixed: true });\n                    }\n                    console.log( \"Finished job \" + job_id + \".\" );\n                },\n                error: function(event, stat, error) {\n                    var str = 'JSON request failed. Status: ' + stat + ' Error: ' + error;\n                    console.log(str);\n                },\n            });\n        }\n    \n\n    });\n</script>\n",
      "status_code": 200,
      "headers": {
        "Server": "nginx/1.18.0",
        "Date": "Fri, 18 Jul 2025 23:41:41 GMT",
        "Content-Type": "text/html; charset=UTF-8",
        "Content-Length": "34851",
        "Connection": "keep-alive",
        "Set-Cookie": "dancer.session=aHrbtKWP8nF0LjQ-w8_cQxbDlVbMI_KL; Path=/; HttpOnly",
        "X-Dancer-Username": "psytz"
      },
      "fetched_at": "2025-07-18T19:41:40.839788"
    },
    "/report/yarn_demand": {
      "content": "<!doctype html>\n<!--[if lt IE 7]>      <html class=\"no-js lt-ie9 lt-ie8 lt-ie7\" lang=\"\"> <![endif]-->\n<!--[if IE 7]>         <html class=\"no-js lt-ie9 lt-ie8\" lang=\"\"> <![endif]-->\n<!--[if IE 8]>         <html class=\"no-js lt-ie9\" lang=\"\"> <![endif]-->\n<!--[if gt IE 8]><!--> <html class=\"no-js\" lang=\"\"> <!--<![endif]-->\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <title>eFab</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"stylesheet\" href=\"/css/cfab.css\">\n  <link rel=\"stylesheet\" href=\"/css/print.css\" media=\"print\">\n  <link rel=\"stylesheet\" href=\"/css/vendor/font-awesome.min.css\">\n  <script src=\"/js/vendor/jquery.min.js\"></script>\n  <script src=\"/js/vendor/jquery.growl.js\"></script>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/vendor/jquery.growl.css\" />\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/vendor/dx.common.css\" />\n  <link rel=\"dx-theme\" data-theme=\"generic.light\" href=\"/css/vendor/dx.light.css\" />\n  <script src=\"/js/vendor/jszip.min.js\"></script>\n  <script src=\"/js/vendor/mousetrap.min.js\"></script>\n  <script src=\"/js/vendor/dx.all.js\"></script>\n  <script src=\"/js/vendor/foundation.min.js\"></script>\n  <script src=\"/js/efab.js\"></script>\n  <script>\n    function integerWithCommas(x) {\n      if (x) {\n        return parseInt(x).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      } else {\n        return '';\n      }\n    }\n    $(function() {\n      // ShortCuts\n      Mousetrap.bind('s', function() { $('input[name=search_string]').select(); return false; });\n    });\n  </script>\n\n  <script>\n    // jQuery plugin to prevent double submission of forms\n    jQuery.fn.preventDoubleSubmission = function() {\n      var $form = $(this);\n\t   // Only add this function once!\n\t   if ($form.data('function_added') === true) {\n\t\t  return this;\n\t\t} else {\n\t\t  $form.data('function_added', true);\n\t\t}\n      $(this).on('submit',function(e){\n        if ($form.data('submitted') === true) {\n          // Previously submitted - don't submit again\n          alert('Please do not double click on buttons.  Thanks!');\n          e.preventDefault();\n        } else {\n          // Mark it so that the next submit can be ignored\n          $form.data('submitted', true);\n          $('button.changeOnSubmit').text('Submitting...');\n        }\n      });\n      // Keep chainability\n      return this;\n    };\n\n    \n  </script>\n</head>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<body>\n\n<!--[if lt IE 8]>\n  <p class=\"browserupgrade\">You are using an <strong>outdated</strong> browser. Please <a href=\"http://browsehappy.com/\">upgrade your browser</a> to improve your experience.</p>\n<![endif]-->\n\n\n  <div class=\"pageContainer\">\n    \n<header>\n  <div class=\"logo\">\n    <img src=\"/img/eFab-Logo-Rev.png\">\n  </div>\n  \n  <div class=\"noJobTab\">\n    <form id=\"search_form\" action=\"/search\" method=\"post\">\n      <input class=\"search allowSubmitOnEnter\" name=\"search_string\" type=\"input\" placeHolder=\"Search\" onkeydown=\"searchKeyDown(event, this);\">\n    </form>\n  </div>\n  \n  <div class=\"subNav\" align=\"right\">\n    <ul>\n      <li><a href=\"/logout\" title=\"Log Out\">Log Out</a></li>\n      <li><a href=\"#\" title=\"Change Password\">My Account</a></li>\n     \n      <li><a href=\"/admin\" title=\"Admin\">Admin</a></li>\n     \n  \n      <li><a href=\"/\" title=\"Jobs List\" title=\"Home\">CFAB <i class=\"fa fa-home\"></i></a></li>\n    </ul>\n  </div>\n  \n  <script>\n    $(document).ready(function() {\n      /* Set the number of Alerts */\n      $('#alertBell').addClass('showBell').attr('data-after',4);\n\n      /* Set the button action to close a job folder */\n      $('#clear-job').on('click', function() {\n        $.ajax({\n          url: '/api/clear-job',\n          type: 'POST',\n          success: function(data) {\n            $('.jobTab').hide();\n            $('.mainContent').removeClass('manila');\n          },\n          error: function(event, stat, error) {\n            var str = 'JSON request failed. Status: ' + stat + ' Error: ' + error;\n            console.log(str);\n          },\n        });\n      });\n    });\n  </script>\n  \n</header>\n\n    <div class=\"mainContainer\">\n      <div class=\"mainNav\">\n        \n\n<nav></nav>\n<div id=\"navDetails\" class=\"hidden\">\n  <div class=\"name\"></div>\n</div>\n<div class=\"favorites-nav\" style=\"width: 200px !important\"></div>\n\n<script>\nvar menuData = [\n  {\n    id: \"10\",\n    name: \"Dashboard\",\n    link: \"/dashboard\",\n    disabled: 0,\n  }, {\n    id: \"20\",\n    name: \"Sales Orders\",\n    link: \"/fabric/so/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"20_1\",\n        name: \"List\",\n        link: \"/fabric/so/list\",\n        disabled: 0,\n      }, {\n        id: \"20_2\",\n        name: \"Finished Create\",\n        link: \"/fabric/sop/create\",\n        disabled: 0,\n      }, {\n        id: \"20_3\",\n        name: \"Greige Create\",\n        link: \"/fabric/gsop/create\",\n        disabled: 0,\n      }, {\n        id: \"20_4\",\n        name: \"Returns\",\n        link: \"/return/list\",\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"30\",\n    name: \"Inventory\",\n    link: \"/yarn\",\n    disabled: 0,\n    items: [\n      {\n        id: \"30_1\",\n        name: \"Yarn\",\n        link: \"/yarn\",\n        disabled: 0,\n      }, {\n        id: \"30_2\",\n        name: \"G00\",\n        link: \"/fabric/greige/list/g00\",\n        disabled: 0,\n      }, {\n        id: \"30_3\",\n        name: \"G02\",\n        link: \"/fabric/greige/list/g02\",\n        disabled: 0,\n      }, {\n        id: \"30_3_1\",\n        name: \"G04\",\n        link: \"/fabric/greige/list/g04\",\n        disabled: 0,\n      }, {\n        id: \"30_3_2\",\n        name: \"G09\",\n        link: \"/fabric/greige/list/g09\",\n        disabled: 0,\n      }, {\n        id: \"30_4\",\n        name: \"I01\",\n        link: \"/fabric/finished/list/i01\",\n        disabled: 0,\n      }, {\n        id: \"30_5\",\n        name: \"F01\",\n        link: \"/fabric/finished/list/f01\",\n        disabled: 0,\n      }, {\n        id: \"30_5a\",\n        name: \"F02\",\n        link: \"/fabric/finished/list/f02\",\n        disabled: 0,\n      }, {\n        id: \"30_5b\",\n        name: \"F04\",\n        link: \"/fabric/finished/list/f04\",\n        disabled: 0,\n      }, {\n        id: \"30_5c\",\n        name: \"F05\",\n        link: \"/fabric/finished/list/f05\",\n        disabled: 0,\n      }, {\n        id: \"30_5d\",\n        name: \"F06\",\n        link: \"/fabric/finished/list/f06\",\n        disabled: 0,\n      }, {\n        id: \"30_5e\",\n        name: \"F07\",\n        link: \"/fabric/finished/list/f07\",\n        disabled: 0,\n      }, {\n        id: \"30_6\",\n        name: \"F08\",\n        link: \"/fabric/finished/list/f08\",\n        disabled: 0,\n      }, {\n        id: \"30_7\",\n        name: \"F09\",\n        link: \"/fabric/finished/list/f09\",\n        disabled: 0,\n      }, {\n        id: \"30_8\",\n        name: \"P01\",\n        link: \"/fabric/finished/list/p01\",\n        disabled: 0,\n      }, {\n        id: \"30_8a\",\n        name: \"S01\",\n        link: \"/fabric/finished/list/s01\",\n        disabled: 0,\n      }, {\n        id: \"30_8b\",\n        name: \"T01\",\n        link: \"/fabric/finished/list/t01\",\n        disabled: 0,\n      }, {\n        id: \"30_9\",\n        name: \"BH\",\n        link: \"/fabric/finished/list/bh\",\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"40\",\n    name: \"Inquiry\",\n    link: \"/styles/inquiry\",\n    disabled: 0,\n  },{\n    id: \"50\",\n    name: \"Supply Orders\",\n    link: \"/yarn/po/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"50_1\",\n        name: \"Yarn POs List\",\n        link: \"/yarn/po/list\",\n        disabled: 0,\n      }, {\n        id: \"50_2\",\n        name: \"Yarn Demand Create\",\n        link: \"/yarn/po/create\",\n        disabled: 0,\n      }, {\n        id: \"50_3\",\n        name: \"Greige POs List\",\n        link: \"/fabric/gpo/list\",\n        disabled: 0,\n      }, {\n        id: \"50_4\",\n        name: \"Greige PO Create\",\n        link: \"/fabric/gpo/create\",\n        disabled: 0,\n      }, {\n        id: \"50_5\",\n        name: \"Finshed POs List\",\n        link: \"/fabric/fpo/list\",\n        disabled: 0,\n      }, {\n        id: \"50_6\",\n        name: \"Finished PO Create\",\n        link: \"/fabric/fpo/create\",\n        disabled: 0,\n      }, {\n        id: \"50_7\",\n        name: \"Finished\",\n        link: \"/fabric/finished/po/list\",\n        disabled: 0,\n      }\n    ],\n  },{\n    id: \"60\",\n    name: \"Work Orders\",\n    link: \"/fabric/knitorder/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"60_1\",\n        name: \"Knit Orders List\",\n        link: \"/fabric/knitorder/list\",\n        disabled: 0,\n      }, {\n        id: \"60_2\",\n        name: \"Knit Order Create\",\n        link: \"/fabric/knitorder/create\",\n        disabled: 0,\n      }, {\n        id: \"60_3\",\n        name: \"Dye Order List\",\n        link: \"/fabric/dyeorder/list\",\n        disabled: 0,\n      }, {\n        id: \"60_4\",\n        name: \"Shipped Dye Orders\",\n        link: \"/fabric/dyeorder/shipped_list\",\n        disabled: 0,\n      }, {\n        id: \"60_5\",\n        name: \"Dye Order Plan Create\",\n        link: \"/fabric/dop/create\",\n        disabled: 0,\n      }, {\n        id: \"60_6\",\n        name: \"Rework Dye Order Plan Create\",\n        link: \"/fabric/dop/create/rework\",\n        disabled: 0,\n      }, {\n        id: \"60_7\",\n        name: \"Production Planning\",\n        link: \"/production/\",\n        disabled: 0,\n        disabled: true,\n      }\n    ],\n  },{\n    id: \"70\",\n    name: \"Ship Orders\",\n    link: \"/ship\",\n    disabled: 0,\n  },{\n    id: \"80\",\n    name: \"SO Ship Queue\",\n    link: \"/ship/so_queue\",\n    disabled: 0,\n  },{\n    id: \"90\",\n    name: \"Accounting\",\n    link: \"/accounting/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"90_1\",\n        name: \"Receivables\",\n        disabled: 0,\n        items: [\n          {\n            id: '90_1a',\n            name: 'Invoices',\n            link: \"/accounting/list\",\n            disabled: 0,\n        \n          }, {\n            id: '90_1b',\n            name: 'Cash Receipts',\n            link: \"/accounting/cash\",\n            disabled: 0,\n        \n          }\n        ],\n      }, {\n        id: \"90_2\",\n        name: \"DO Accounts Payable\",\n        disabled: 0,\n        items: [\n          {\n            id: \"90_2a\",\n            name: \"Payables List\",\n            link: \"/accounting/do_payables\",\n            disabled: 0,\n          }, {\n            id: \"90_2b\",\n            name: \"Create Payables Invoice\",\n            link: \"/accounting/do_payables/pinv_create\",\n            disabled: 0,\n          }, {\n            id: \"90_2c\",\n            name: \"Completed Payables Invoices\",\n            link: \"/accounting/do_payables/completed_list\",\n            disabled: 0,\n          }, {\n            id: \"90_2d\",\n            name: \"Paid w/ No Finished Fab\",\n            link: \"/accounting/do_payables/paid_no_finfab\",\n            disabled: 0,\n          }, {\n            id: \"90_2e\",\n            name: \"Could Not Upload\",\n            link: \"/accounting/do_payables/no_upload_list\",\n            disabled: 0,\n          },   \n        ]\n      }, {\n        id: \"90_3\",\n        name: \"Yarn Accounts Payable\",\n        disabled: 0,\n        items: [\n          {\n            id: \"90_3a\",\n            name: \"Payables List\",\n            link: \"/accounting/yarn_payables\",\n            disabled: 0,\n          }, {\n            id: \"90_3b\",\n            name: \"Create Payables Invoice\",\n            link: \"/accounting/yarn_payables/pinv_create\",\n            disabled: 0,\n          }, {\n            id: \"90_3c\",\n            name: \"Completed Payables Invoices\",\n            link: \"/accounting/yarn_payables/completed_list\",\n            disabled: 0,\n//          }, {\n//            id: \"90_3d\",\n//            name: \"Paid w/ No Yarn Received\",\n//            link: \"/accounting/yarn_payables/paid_no_rcvd\",\n//            disabled: 0,\n          }, {\n            id: \"90_2e\",\n            name: \"Could Not Upload\",\n            link: \"/accounting/yarn_payables/no_upload_list\",\n            disabled: 0,\n          }\n        ]\n    \n      }, {\n        id: \"90_4\",\n        name: \"Sales Commissions\",\n        disabled: 0,\n        link: \"/accounting/sales_commissions\",\n    \n      }\n    ]\n  },{\n    id: \"100\",\n    name: \"Styles\",\n    link: \"/styles/list\",\n    disabled: 0,\n    items: [\n      {\n        id: '100_1',\n        name: 'Styles',\n        link: '/styles/list',\n        disabled: 0,\n      }, {\n        id: '100_2',\n        name: 'Customer Style Codes',\n        link: '/customer_styles',\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"110\",\n    name: \"Customers\",\n    link: \"/customer/list\",\n    disabled: 0,\n  },{\n    id: \"120\",\n    name: \"Reports\",\n    link: \"/reports/sales_activity\",\n    disabled: 0,\n    items: [\n      { id : \"120_0\",\n        name: \"Reports Queue\",\n        link: \"/reports/report_queue\",\n        disabled: 0, \n      },\n      {\n        id: \"120_1\",\n        name: \"Sales\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_1a\",\n            name: \"Sales Activity\",\n            link: \"/reports/sales_activity\",\n            disabled: 0,\n          },\n          {\n            id: \"120_1b\",\n            name: \"Cut & Sew Transfers\",\n            link: \"/reports/cut_and_sew\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_2\",\n        name: \"Monthly\",\n        link: \"/reports/rack/by_rack_summary\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_2a\",\n            name: \"Inventory Activity (trans)\",\n            link: \"/reports/inventory_activity\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2b\",\n            name: \"Inventory Snapshot (roll)\",\n            link: \"/reports/inventory_snapshot\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2c\",\n            name: \"Work Order Inventory Activity (ko/do)\",\n            link: \"/reports/workorder\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2d\",\n            name: \"Inventory Summary\",\n            link: \"/reports/inventory_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2e\",\n            name: \"Journal Entry\",\n            link: \"/reports/journal_entry\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2f\",\n            name: \"Reporting Anomalies\",\n            link: \"/reports/report_anomalies\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2g\",\n            name: \"History-Changing Transactions\",\n            link: \"/reports/history_changers\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2h\",\n            name: \"Snapshot Working Loss\",\n            link: \"/reports/snapshot_working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2i\",\n            name: \"Prepaid Finishing\",\n            link: \"/reports/prepaid_finishing\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_3\",\n        name: \"Yarns\",\n        link: \"/report/yarn_transaction\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_3a\",\n            name: \"Transactions\",\n            link: \"/report/yarn_transaction\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3b\",\n            name: \"Actual Receipts\",\n            link: \"/reports/yarn_receipt\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3c\",\n            name: \"Expected Receipts\",\n            link: \"/report/expected_yarn\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3d\",\n            name: \"Costing Summary\",\n            link: \"/reports/yarn_costing_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3d_2\",\n            name: \"Costing Detail\",\n            link: \"/reports/yarn_costing_detail\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3e\",\n            name: \"Valuation Report\",\n            link: '/reports/yarn_valuation',\n            disabled: 0,\n          },\n          {\n            id: \"120_3f\",\n            name: \"Yarn in G00\",\n            link: '/reports/yarn_in_g00',\n            disabled: 0,\n          },\n          {\n            id: \"120_3g\",\n            name: \"Yarn Accrual\",\n            link: '/reports/yarn_accrual',\n            disabled: 0,\n          },\n          {\n            id: \"120_3h\",\n            name: \"Depletion Adjustments\",\n            link: '/reports/depletion_adjustment',\n            disabled: 0,\n          },\n          {\n            id: \"120_3i\",\n            name: \"Manual Adjustments\",\n            link: '/reports/yarn_adjustment',\n            disabled: 0,\n          },\n          {\n            id: \"120_3j\",\n            name: \"Prior-Period Adjustments\",\n            link: '/report/yarn_prior_period',\n            disabled: 0,\n          },\n          {\n            id: \"120_3k\",\n            name: \"Yarn Demand by Style\",\n            link: '/report/yarn_demand',\n            disabled: 0,\n          },\n          {\n            id: \"120_3l\",\n            name: \"Yarn Demand Summary\",\n            link: '/report/yarn_demand_summary',\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_4\",\n        name: \"Fin Work Loss\",\n        link: \"/reports/working_loss\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_4a\",\n            name: \"Standard\",\n            link: \"/reports/working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_4b\",\n            name: \"NSA\",\n            link: \"/reports/nsa_working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_4c\",\n            name: \"Discrepancy\",\n            link: \"/reports/working_loss_discrep\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_5\",\n        name: \"Rack Sheets\",\n        link: \"/reports/rack/by_rack_summary\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_5a\",\n            name: \"By Rack Summary\",\n            link: \"/reports/rack/by_rack_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5b\",\n            name: \"By Rack Detail\",\n            link: \"/reports/rack/by_rack_detail\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5c\",\n            name: \"By Style Summary\",\n            link: \"/reports/rack/by_style_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5d\",\n            name: \"I01 Detail\",\n            link: \"/reports/rack/io1_by_do_detail\",\n            disabled: 0,\n          }\n        ]\n      }\n    ]\n  }\n];\n\n$(function(){\n  var favData = [\n    { id: 1, text: \"Test Favorite Item 1\", icon: \"group\" },\n  ];\n\n  var $testNav = $('div.favorites-nav');\n\n  let favMenuList = '';\n  favData.map((listItem) => {\n    favMenuList = favMenuList + `<li><a href='#'>${listItem.text}</a></li>`;\n  });\n\n  $testNav.html(`\n    <h3>Favorites</h3>\n    <ul>${favMenuList}</ul>\n  `);\n  \n  var $favButton = $('#favButton, #favButton i.fa-star');\n  var $favMenuIcon = $('#favButton i.fa-star');\n  var $testNavElements = $('div.favorites-nav *');\n\n\n  $('body').off().on('click', function (e) {\n    const $target = $(e.target);\n    if ($target.is($favButton)) {\n      $testNav.toggle();\n      $favMenuIcon.toggleClass('active');\n    } else if ($testNav.css('display') !== 'none' && !$target.is($testNav) && !$target.is($testNavElements)) {\n      $testNav.hide();\n      $favMenuIcon.removeClass('active');\n    }\n  });\n\n\n  // Main nav dxMenu\n  var dxMenu = $(\"nav\").dxMenu({\n    dataSource: menuData,\n    hideSubmenuOnMouseLeave: true,\n    showFirstSubmenuMode: {\n      name: 'onHover',\n      delay: {\n        show: 0,\n        hide: 400,\n      }\n    },\n    displayExpr: 'name',\n    orientation: 'vertical',\n    onItemClick: function (data) {\n      var item = data.itemData;\n      if(item.link) {\n        window.location.href = item.link;\n      }\n    },\n  }).dxMenu(\"instance\");\n\n  \n});\n</script>\n\n      </div>\n      <div class=\"mainContent\">\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n  <script>\n    $(function() {\n      $('nav .dx-menu-vertical ul li:nth-of-type(12)').addClass('active');\n    });\n  </script>\n  \n\n\n<div class=\"mainContentWrapper\">\n  <h2>Yarn Demand Report by Style</h2>\n  <div id=\"reportGrid\"></div>\n</div>\n\n<script>\n  var reportStore = new DevExpress.data.CustomStore({\n    load: function() {\n      return $.getJSON('/api/report/yarn_demand');\n    },\n  });\n\n  $('#reportGrid').dxDataGrid({\n    dataSource: reportStore,\n    columnAutoWidth: true,\n    height: $(window).height() - 150,\n    \"export\": {\n      enabled: true,\n      fileName: \"Yarn_Demand_By_Style\"\n    },\n    paging: {\n      enabled: false,\n    },\n    filterRow: { visible: true },\n    filterPanel: { visible: true },\n    headerFilter: { visible: true },\n    columns: [\n      {\n        dataField: \"style\",\n        dataType: \"string\",\n        caption: \"Style\",\n        sortOrder: \"asc\",\n      }, {\n        dataField: \"yarn_desc\",\n        dataType: \"number\",\n        caption: \"Yarn\",\n      }, {\n        dataField: \"percent\",\n        dataType: \"number\",\n        caption: \"Percentage\",\n      }, {\n        dataField: \"count_0\",\n        dataType: \"number\",\n        caption: \"This Week\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_0 > 0 ? rowData.count_0 : null;\n        },\n      }, {\n        dataField: \"count_1\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n          return rowData.count_1 > 0 ? rowData.count_1 : null;\n        },\n        headerCellTemplate: function(myHeader, obj, e) {\n          let weekNum = obj.component.getDataSource()._items[0].weeks[1].week_num;\n          //var date = new Date(obj.component.getDataSource()._items[0].weeks[1].start_dt);\n          //myHeader.text(`Week ${weekNum} (${date.toLocaleDateString()})`);\n          myHeader.text(`Week ${weekNum}`);\n          obj.component.columnOption(\"count_1\", \"caption\", `Week ${weekNum}`);\n        }\n      }, {\n        dataField: \"count_2\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n          return rowData.count_2 > 0 ? rowData.count_2 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n          let weekNum = obj.component.getDataSource()._items[0].weeks[2].week_num;\n          //var date = new Date(obj.component.getDataSource()._items[0].weeks[2].start_dt);\n          //myHeader.text(`Week ${weekNum} (${date.toLocaleDateString()})`);\n          myHeader.text(`Week ${weekNum}`);\n          obj.component.columnOption(\"count_2\", \"caption\", `Week ${weekNum}`);\n        }\n      }, {\n        dataField: \"count_3\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n          return rowData.count_3 > 0 ? rowData.count_3 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n          let weekNum = obj.component.getDataSource()._items[0].weeks[3].week_num;\n          //var date = new Date(obj.component.getDataSource()._items[0].weeks[3].start_dt);\n          //myHeader.text(`Week ${weekNum} (${date.toLocaleDateString()})`);\n          myHeader.text(`Week ${weekNum}`);\n          obj.component.columnOption(\"count_3\", \"caption\", `Week ${weekNum}`);\n        }\n      }, {\n        dataField: \"count_4\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n          return rowData.count_4 > 0 ? rowData.count_4 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n          let weekNum = obj.component.getDataSource()._items[0].weeks[4].week_num;\n          //var date = new Date(obj.component.getDataSource()._items[0].weeks[4].start_dt);\n          //myHeader.text(`Week ${weekNum} (${date.toLocaleDateString()})`);\n          myHeader.text(`Week ${weekNum}`);\n          obj.component.columnOption(\"count_4\", \"caption\", `Week ${weekNum}`);\n        }\n      }, {\n        dataField: \"count_5\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n          return rowData.count_5 > 0 ? rowData.count_5 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n          let weekNum = obj.component.getDataSource()._items[0].weeks[5].week_num;\n          //var date = new Date(obj.component.getDataSource()._items[0].weeks[5].start_dt);\n          //myHeader.text(`Week ${weekNum} (${date.toLocaleDateString()})`);\n          myHeader.text(`Week ${weekNum}`);\n          obj.component.columnOption(\"count_5\", \"caption\", `Week ${weekNum}`);\n        }\n      }, {\n        dataField: \"count_6\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n          return rowData.count_6 > 0 ? rowData.count_6 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n          let weekNum = obj.component.getDataSource()._items[0].weeks[6].week_num;\n          //var date = new Date(obj.component.getDataSource()._items[0].weeks[6].start_dt);\n          //myHeader.text(`Week ${weekNum} (${date.toLocaleDateString()})`);\n          myHeader.text(`Week ${weekNum}`);\n          obj.component.columnOption(\"count_6\", \"caption\", `Week ${weekNum}`);\n        }\n      }, {\n        dataField: \"count_7\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n          return rowData.count_7 > 0 ? rowData.count_7 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n          let weekNum = obj.component.getDataSource()._items[0].weeks[7].week_num;\n          //var date = new Date(obj.component.getDataSource()._items[0].weeks[7].start_dt);\n          //myHeader.text(`Week ${weekNum} (${date.toLocaleDateString()})`);\n          myHeader.text(`Week ${weekNum}`);\n          obj.component.columnOption(\"count_7\", \"caption\", `Week ${weekNum}`);\n        }\n      }, {\n        dataField: \"count_8\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n          return rowData.count_8 > 0 ? rowData.count_8 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n          let weekNum = obj.component.getDataSource()._items[0].weeks[8].week_num;\n          //var date = new Date(obj.component.getDataSource()._items[0].weeks[8].start_dt);\n          //myHeader.text(`Week ${weekNum} (${date.toLocaleDateString()})`);\n          myHeader.text(`Week ${weekNum}`);\n          obj.component.columnOption(\"count_8\", \"caption\", `Week ${weekNum}`);\n        }\n      }, {\n        dataField: \"later\",\n        dataType: \"number\",\n        caption: \"Later\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.later > 0 ? rowData.later : null;\n        },\n      }, {\n         dataField: \"total\",\n         dataType: \"number\",\n         caption: \"Total\",\n         format: {\n          type: \"fixedPoint\",\n          precision: 1,\n        },\n      }\n    ],\n  });\n</script>\n</div>\n    </div>\n    \n  </div>\n\n  <script>$(document).foundation();</script>\n</body>\n</html>\n\n\n\n\n<script type=\"text/javascript\">\n    $( document ).ready(function() {\n        \n        \n    \n    \n        var fullURL = window.location;\n        var baseURL = fullURL.protocol + \"//\" + fullURL.host;\n        var timer = setInterval(\n            function() {\n            \n            },\n            60000\n        );\n\n        function finishJob( job_id, job_type ) {\n            clearInterval(timer);\n\n            var actionURL;\n            switch( job_type ) {\n                \n                case 'yarn_reconcile_import':\n                    actionURL = '/admin/reconcile_results/' + job_id;\n                    break;\n                \n                default:\n                    return;\n            }\n\n            var finishURL = baseURL + actionURL;\n            $.ajax({\n                url: finishURL,\n                type: 'GET',\n                success: function( data ) {\n                    if( data.error === 1 ) {\n                        $.growl({ message: data.message, style: \"error\", title: \"Error!\", fixed: true });\n                    } else {\n                        $.growl({ message: data.message, style: \"notice\", title: \"Success!\", fixed: true });\n                    }\n                    console.log( \"Finished job \" + job_id + \".\" );\n                },\n                error: function(event, stat, error) {\n                    var str = 'JSON request failed. Status: ' + stat + ' Error: ' + error;\n                    console.log(str);\n                },\n            });\n        }\n    \n\n    });\n</script>\n",
      "status_code": 200,
      "headers": {
        "Server": "nginx/1.18.0",
        "Date": "Fri, 18 Jul 2025 23:41:42 GMT",
        "Content-Type": "text/html; charset=UTF-8",
        "Content-Length": "29119",
        "Connection": "keep-alive",
        "Set-Cookie": "dancer.session=aHrbtKWP8nF0LjQ-w8_cQxbDlVbMI_KL; HttpOnly; Path=/",
        "X-Dancer-Username": "psytz"
      },
      "fetched_at": "2025-07-18T19:41:40.919887"
    },
    "/yarn/po/list": {
      "content": "<!doctype html>\n<!--[if lt IE 7]>      <html class=\"no-js lt-ie9 lt-ie8 lt-ie7\" lang=\"\"> <![endif]-->\n<!--[if IE 7]>         <html class=\"no-js lt-ie9 lt-ie8\" lang=\"\"> <![endif]-->\n<!--[if IE 8]>         <html class=\"no-js lt-ie9\" lang=\"\"> <![endif]-->\n<!--[if gt IE 8]><!--> <html class=\"no-js\" lang=\"\"> <!--<![endif]-->\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <title>eFab</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"stylesheet\" href=\"/css/cfab.css\">\n  <link rel=\"stylesheet\" href=\"/css/print.css\" media=\"print\">\n  <link rel=\"stylesheet\" href=\"/css/vendor/font-awesome.min.css\">\n  <script src=\"/js/vendor/jquery.min.js\"></script>\n  <script src=\"/js/vendor/jquery.growl.js\"></script>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/vendor/jquery.growl.css\" />\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/vendor/dx.common.css\" />\n  <link rel=\"dx-theme\" data-theme=\"generic.light\" href=\"/css/vendor/dx.light.css\" />\n  <script src=\"/js/vendor/jszip.min.js\"></script>\n  <script src=\"/js/vendor/mousetrap.min.js\"></script>\n  <script src=\"/js/vendor/dx.all.js\"></script>\n  <script src=\"/js/vendor/foundation.min.js\"></script>\n  <script src=\"/js/efab.js\"></script>\n  <script>\n    function integerWithCommas(x) {\n      if (x) {\n        return parseInt(x).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      } else {\n        return '';\n      }\n    }\n    $(function() {\n      // ShortCuts\n      Mousetrap.bind('s', function() { $('input[name=search_string]').select(); return false; });\n    });\n  </script>\n\n  <script>\n    // jQuery plugin to prevent double submission of forms\n    jQuery.fn.preventDoubleSubmission = function() {\n      var $form = $(this);\n\t   // Only add this function once!\n\t   if ($form.data('function_added') === true) {\n\t\t  return this;\n\t\t} else {\n\t\t  $form.data('function_added', true);\n\t\t}\n      $(this).on('submit',function(e){\n        if ($form.data('submitted') === true) {\n          // Previously submitted - don't submit again\n          alert('Please do not double click on buttons.  Thanks!');\n          e.preventDefault();\n        } else {\n          // Mark it so that the next submit can be ignored\n          $form.data('submitted', true);\n          $('button.changeOnSubmit').text('Submitting...');\n        }\n      });\n      // Keep chainability\n      return this;\n    };\n\n    \n  </script>\n</head>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<body>\n\n<!--[if lt IE 8]>\n  <p class=\"browserupgrade\">You are using an <strong>outdated</strong> browser. Please <a href=\"http://browsehappy.com/\">upgrade your browser</a> to improve your experience.</p>\n<![endif]-->\n\n\n  <div class=\"pageContainer\">\n    \n<header>\n  <div class=\"logo\">\n    <img src=\"/img/eFab-Logo-Rev.png\">\n  </div>\n  \n  <div class=\"noJobTab\">\n    <form id=\"search_form\" action=\"/search\" method=\"post\">\n      <input class=\"search allowSubmitOnEnter\" name=\"search_string\" type=\"input\" placeHolder=\"Search\" onkeydown=\"searchKeyDown(event, this);\">\n    </form>\n  </div>\n  \n  <div class=\"subNav\" align=\"right\">\n    <ul>\n      <li><a href=\"/logout\" title=\"Log Out\">Log Out</a></li>\n      <li><a href=\"#\" title=\"Change Password\">My Account</a></li>\n     \n      <li><a href=\"/admin\" title=\"Admin\">Admin</a></li>\n     \n  \n      <li><a href=\"/\" title=\"Jobs List\" title=\"Home\">CFAB <i class=\"fa fa-home\"></i></a></li>\n    </ul>\n  </div>\n  \n  <script>\n    $(document).ready(function() {\n      /* Set the number of Alerts */\n      $('#alertBell').addClass('showBell').attr('data-after',4);\n\n      /* Set the button action to close a job folder */\n      $('#clear-job').on('click', function() {\n        $.ajax({\n          url: '/api/clear-job',\n          type: 'POST',\n          success: function(data) {\n            $('.jobTab').hide();\n            $('.mainContent').removeClass('manila');\n          },\n          error: function(event, stat, error) {\n            var str = 'JSON request failed. Status: ' + stat + ' Error: ' + error;\n            console.log(str);\n          },\n        });\n      });\n    });\n  </script>\n  \n</header>\n\n    <div class=\"mainContainer\">\n      <div class=\"mainNav\">\n        \n\n<nav></nav>\n<div id=\"navDetails\" class=\"hidden\">\n  <div class=\"name\"></div>\n</div>\n<div class=\"favorites-nav\" style=\"width: 200px !important\"></div>\n\n<script>\nvar menuData = [\n  {\n    id: \"10\",\n    name: \"Dashboard\",\n    link: \"/dashboard\",\n    disabled: 0,\n  }, {\n    id: \"20\",\n    name: \"Sales Orders\",\n    link: \"/fabric/so/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"20_1\",\n        name: \"List\",\n        link: \"/fabric/so/list\",\n        disabled: 0,\n      }, {\n        id: \"20_2\",\n        name: \"Finished Create\",\n        link: \"/fabric/sop/create\",\n        disabled: 0,\n      }, {\n        id: \"20_3\",\n        name: \"Greige Create\",\n        link: \"/fabric/gsop/create\",\n        disabled: 0,\n      }, {\n        id: \"20_4\",\n        name: \"Returns\",\n        link: \"/return/list\",\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"30\",\n    name: \"Inventory\",\n    link: \"/yarn\",\n    disabled: 0,\n    items: [\n      {\n        id: \"30_1\",\n        name: \"Yarn\",\n        link: \"/yarn\",\n        disabled: 0,\n      }, {\n        id: \"30_2\",\n        name: \"G00\",\n        link: \"/fabric/greige/list/g00\",\n        disabled: 0,\n      }, {\n        id: \"30_3\",\n        name: \"G02\",\n        link: \"/fabric/greige/list/g02\",\n        disabled: 0,\n      }, {\n        id: \"30_3_1\",\n        name: \"G04\",\n        link: \"/fabric/greige/list/g04\",\n        disabled: 0,\n      }, {\n        id: \"30_3_2\",\n        name: \"G09\",\n        link: \"/fabric/greige/list/g09\",\n        disabled: 0,\n      }, {\n        id: \"30_4\",\n        name: \"I01\",\n        link: \"/fabric/finished/list/i01\",\n        disabled: 0,\n      }, {\n        id: \"30_5\",\n        name: \"F01\",\n        link: \"/fabric/finished/list/f01\",\n        disabled: 0,\n      }, {\n        id: \"30_5a\",\n        name: \"F02\",\n        link: \"/fabric/finished/list/f02\",\n        disabled: 0,\n      }, {\n        id: \"30_5b\",\n        name: \"F04\",\n        link: \"/fabric/finished/list/f04\",\n        disabled: 0,\n      }, {\n        id: \"30_5c\",\n        name: \"F05\",\n        link: \"/fabric/finished/list/f05\",\n        disabled: 0,\n      }, {\n        id: \"30_5d\",\n        name: \"F06\",\n        link: \"/fabric/finished/list/f06\",\n        disabled: 0,\n      }, {\n        id: \"30_5e\",\n        name: \"F07\",\n        link: \"/fabric/finished/list/f07\",\n        disabled: 0,\n      }, {\n        id: \"30_6\",\n        name: \"F08\",\n        link: \"/fabric/finished/list/f08\",\n        disabled: 0,\n      }, {\n        id: \"30_7\",\n        name: \"F09\",\n        link: \"/fabric/finished/list/f09\",\n        disabled: 0,\n      }, {\n        id: \"30_8\",\n        name: \"P01\",\n        link: \"/fabric/finished/list/p01\",\n        disabled: 0,\n      }, {\n        id: \"30_8a\",\n        name: \"S01\",\n        link: \"/fabric/finished/list/s01\",\n        disabled: 0,\n      }, {\n        id: \"30_8b\",\n        name: \"T01\",\n        link: \"/fabric/finished/list/t01\",\n        disabled: 0,\n      }, {\n        id: \"30_9\",\n        name: \"BH\",\n        link: \"/fabric/finished/list/bh\",\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"40\",\n    name: \"Inquiry\",\n    link: \"/styles/inquiry\",\n    disabled: 0,\n  },{\n    id: \"50\",\n    name: \"Supply Orders\",\n    link: \"/yarn/po/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"50_1\",\n        name: \"Yarn POs List\",\n        link: \"/yarn/po/list\",\n        disabled: 0,\n      }, {\n        id: \"50_2\",\n        name: \"Yarn Demand Create\",\n        link: \"/yarn/po/create\",\n        disabled: 0,\n      }, {\n        id: \"50_3\",\n        name: \"Greige POs List\",\n        link: \"/fabric/gpo/list\",\n        disabled: 0,\n      }, {\n        id: \"50_4\",\n        name: \"Greige PO Create\",\n        link: \"/fabric/gpo/create\",\n        disabled: 0,\n      }, {\n        id: \"50_5\",\n        name: \"Finshed POs List\",\n        link: \"/fabric/fpo/list\",\n        disabled: 0,\n      }, {\n        id: \"50_6\",\n        name: \"Finished PO Create\",\n        link: \"/fabric/fpo/create\",\n        disabled: 0,\n      }, {\n        id: \"50_7\",\n        name: \"Finished\",\n        link: \"/fabric/finished/po/list\",\n        disabled: 0,\n      }\n    ],\n  },{\n    id: \"60\",\n    name: \"Work Orders\",\n    link: \"/fabric/knitorder/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"60_1\",\n        name: \"Knit Orders List\",\n        link: \"/fabric/knitorder/list\",\n        disabled: 0,\n      }, {\n        id: \"60_2\",\n        name: \"Knit Order Create\",\n        link: \"/fabric/knitorder/create\",\n        disabled: 0,\n      }, {\n        id: \"60_3\",\n        name: \"Dye Order List\",\n        link: \"/fabric/dyeorder/list\",\n        disabled: 0,\n      }, {\n        id: \"60_4\",\n        name: \"Shipped Dye Orders\",\n        link: \"/fabric/dyeorder/shipped_list\",\n        disabled: 0,\n      }, {\n        id: \"60_5\",\n        name: \"Dye Order Plan Create\",\n        link: \"/fabric/dop/create\",\n        disabled: 0,\n      }, {\n        id: \"60_6\",\n        name: \"Rework Dye Order Plan Create\",\n        link: \"/fabric/dop/create/rework\",\n        disabled: 0,\n      }, {\n        id: \"60_7\",\n        name: \"Production Planning\",\n        link: \"/production/\",\n        disabled: 0,\n        disabled: true,\n      }\n    ],\n  },{\n    id: \"70\",\n    name: \"Ship Orders\",\n    link: \"/ship\",\n    disabled: 0,\n  },{\n    id: \"80\",\n    name: \"SO Ship Queue\",\n    link: \"/ship/so_queue\",\n    disabled: 0,\n  },{\n    id: \"90\",\n    name: \"Accounting\",\n    link: \"/accounting/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"90_1\",\n        name: \"Receivables\",\n        disabled: 0,\n        items: [\n          {\n            id: '90_1a',\n            name: 'Invoices',\n            link: \"/accounting/list\",\n            disabled: 0,\n        \n          }, {\n            id: '90_1b',\n            name: 'Cash Receipts',\n            link: \"/accounting/cash\",\n            disabled: 0,\n        \n          }\n        ],\n      }, {\n        id: \"90_2\",\n        name: \"DO Accounts Payable\",\n        disabled: 0,\n        items: [\n          {\n            id: \"90_2a\",\n            name: \"Payables List\",\n            link: \"/accounting/do_payables\",\n            disabled: 0,\n          }, {\n            id: \"90_2b\",\n            name: \"Create Payables Invoice\",\n            link: \"/accounting/do_payables/pinv_create\",\n            disabled: 0,\n          }, {\n            id: \"90_2c\",\n            name: \"Completed Payables Invoices\",\n            link: \"/accounting/do_payables/completed_list\",\n            disabled: 0,\n          }, {\n            id: \"90_2d\",\n            name: \"Paid w/ No Finished Fab\",\n            link: \"/accounting/do_payables/paid_no_finfab\",\n            disabled: 0,\n          }, {\n            id: \"90_2e\",\n            name: \"Could Not Upload\",\n            link: \"/accounting/do_payables/no_upload_list\",\n            disabled: 0,\n          },   \n        ]\n      }, {\n        id: \"90_3\",\n        name: \"Yarn Accounts Payable\",\n        disabled: 0,\n        items: [\n          {\n            id: \"90_3a\",\n            name: \"Payables List\",\n            link: \"/accounting/yarn_payables\",\n            disabled: 0,\n          }, {\n            id: \"90_3b\",\n            name: \"Create Payables Invoice\",\n            link: \"/accounting/yarn_payables/pinv_create\",\n            disabled: 0,\n          }, {\n            id: \"90_3c\",\n            name: \"Completed Payables Invoices\",\n            link: \"/accounting/yarn_payables/completed_list\",\n            disabled: 0,\n//          }, {\n//            id: \"90_3d\",\n//            name: \"Paid w/ No Yarn Received\",\n//            link: \"/accounting/yarn_payables/paid_no_rcvd\",\n//            disabled: 0,\n          }, {\n            id: \"90_2e\",\n            name: \"Could Not Upload\",\n            link: \"/accounting/yarn_payables/no_upload_list\",\n            disabled: 0,\n          }\n        ]\n    \n      }, {\n        id: \"90_4\",\n        name: \"Sales Commissions\",\n        disabled: 0,\n        link: \"/accounting/sales_commissions\",\n    \n      }\n    ]\n  },{\n    id: \"100\",\n    name: \"Styles\",\n    link: \"/styles/list\",\n    disabled: 0,\n    items: [\n      {\n        id: '100_1',\n        name: 'Styles',\n        link: '/styles/list',\n        disabled: 0,\n      }, {\n        id: '100_2',\n        name: 'Customer Style Codes',\n        link: '/customer_styles',\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"110\",\n    name: \"Customers\",\n    link: \"/customer/list\",\n    disabled: 0,\n  },{\n    id: \"120\",\n    name: \"Reports\",\n    link: \"/reports/sales_activity\",\n    disabled: 0,\n    items: [\n      { id : \"120_0\",\n        name: \"Reports Queue\",\n        link: \"/reports/report_queue\",\n        disabled: 0, \n      },\n      {\n        id: \"120_1\",\n        name: \"Sales\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_1a\",\n            name: \"Sales Activity\",\n            link: \"/reports/sales_activity\",\n            disabled: 0,\n          },\n          {\n            id: \"120_1b\",\n            name: \"Cut & Sew Transfers\",\n            link: \"/reports/cut_and_sew\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_2\",\n        name: \"Monthly\",\n        link: \"/reports/rack/by_rack_summary\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_2a\",\n            name: \"Inventory Activity (trans)\",\n            link: \"/reports/inventory_activity\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2b\",\n            name: \"Inventory Snapshot (roll)\",\n            link: \"/reports/inventory_snapshot\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2c\",\n            name: \"Work Order Inventory Activity (ko/do)\",\n            link: \"/reports/workorder\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2d\",\n            name: \"Inventory Summary\",\n            link: \"/reports/inventory_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2e\",\n            name: \"Journal Entry\",\n            link: \"/reports/journal_entry\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2f\",\n            name: \"Reporting Anomalies\",\n            link: \"/reports/report_anomalies\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2g\",\n            name: \"History-Changing Transactions\",\n            link: \"/reports/history_changers\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2h\",\n            name: \"Snapshot Working Loss\",\n            link: \"/reports/snapshot_working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2i\",\n            name: \"Prepaid Finishing\",\n            link: \"/reports/prepaid_finishing\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_3\",\n        name: \"Yarns\",\n        link: \"/report/yarn_transaction\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_3a\",\n            name: \"Transactions\",\n            link: \"/report/yarn_transaction\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3b\",\n            name: \"Actual Receipts\",\n            link: \"/reports/yarn_receipt\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3c\",\n            name: \"Expected Receipts\",\n            link: \"/report/expected_yarn\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3d\",\n            name: \"Costing Summary\",\n            link: \"/reports/yarn_costing_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3d_2\",\n            name: \"Costing Detail\",\n            link: \"/reports/yarn_costing_detail\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3e\",\n            name: \"Valuation Report\",\n            link: '/reports/yarn_valuation',\n            disabled: 0,\n          },\n          {\n            id: \"120_3f\",\n            name: \"Yarn in G00\",\n            link: '/reports/yarn_in_g00',\n            disabled: 0,\n          },\n          {\n            id: \"120_3g\",\n            name: \"Yarn Accrual\",\n            link: '/reports/yarn_accrual',\n            disabled: 0,\n          },\n          {\n            id: \"120_3h\",\n            name: \"Depletion Adjustments\",\n            link: '/reports/depletion_adjustment',\n            disabled: 0,\n          },\n          {\n            id: \"120_3i\",\n            name: \"Manual Adjustments\",\n            link: '/reports/yarn_adjustment',\n            disabled: 0,\n          },\n          {\n            id: \"120_3j\",\n            name: \"Prior-Period Adjustments\",\n            link: '/report/yarn_prior_period',\n            disabled: 0,\n          },\n          {\n            id: \"120_3k\",\n            name: \"Yarn Demand by Style\",\n            link: '/report/yarn_demand',\n            disabled: 0,\n          },\n          {\n            id: \"120_3l\",\n            name: \"Yarn Demand Summary\",\n            link: '/report/yarn_demand_summary',\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_4\",\n        name: \"Fin Work Loss\",\n        link: \"/reports/working_loss\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_4a\",\n            name: \"Standard\",\n            link: \"/reports/working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_4b\",\n            name: \"NSA\",\n            link: \"/reports/nsa_working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_4c\",\n            name: \"Discrepancy\",\n            link: \"/reports/working_loss_discrep\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_5\",\n        name: \"Rack Sheets\",\n        link: \"/reports/rack/by_rack_summary\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_5a\",\n            name: \"By Rack Summary\",\n            link: \"/reports/rack/by_rack_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5b\",\n            name: \"By Rack Detail\",\n            link: \"/reports/rack/by_rack_detail\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5c\",\n            name: \"By Style Summary\",\n            link: \"/reports/rack/by_style_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5d\",\n            name: \"I01 Detail\",\n            link: \"/reports/rack/io1_by_do_detail\",\n            disabled: 0,\n          }\n        ]\n      }\n    ]\n  }\n];\n\n$(function(){\n  var favData = [\n    { id: 1, text: \"Test Favorite Item 1\", icon: \"group\" },\n  ];\n\n  var $testNav = $('div.favorites-nav');\n\n  let favMenuList = '';\n  favData.map((listItem) => {\n    favMenuList = favMenuList + `<li><a href='#'>${listItem.text}</a></li>`;\n  });\n\n  $testNav.html(`\n    <h3>Favorites</h3>\n    <ul>${favMenuList}</ul>\n  `);\n  \n  var $favButton = $('#favButton, #favButton i.fa-star');\n  var $favMenuIcon = $('#favButton i.fa-star');\n  var $testNavElements = $('div.favorites-nav *');\n\n\n  $('body').off().on('click', function (e) {\n    const $target = $(e.target);\n    if ($target.is($favButton)) {\n      $testNav.toggle();\n      $favMenuIcon.toggleClass('active');\n    } else if ($testNav.css('display') !== 'none' && !$target.is($testNav) && !$target.is($testNavElements)) {\n      $testNav.hide();\n      $favMenuIcon.removeClass('active');\n    }\n  });\n\n\n  // Main nav dxMenu\n  var dxMenu = $(\"nav\").dxMenu({\n    dataSource: menuData,\n    hideSubmenuOnMouseLeave: true,\n    showFirstSubmenuMode: {\n      name: 'onHover',\n      delay: {\n        show: 0,\n        hide: 400,\n      }\n    },\n    displayExpr: 'name',\n    orientation: 'vertical',\n    onItemClick: function (data) {\n      var item = data.itemData;\n      if(item.link) {\n        window.location.href = item.link;\n      }\n    },\n  }).dxMenu(\"instance\");\n\n  \n});\n</script>\n\n      </div>\n      <div class=\"mainContent\">\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n  <script>\n    $(function() {\n      $('nav .dx-menu-vertical ul li:nth-of-type(5)').addClass('active');\n    });\n  </script>\n  \n\n<div class=\"mainContentWrapper\">\n  <div class=\"grid-x\">\n    <div class=\"cell small-3\">\n      \n \n  <a href=\"/yarn/po/list\"            class=\"button tabButton active\">Yarn</a>\n  <a href=\"/fabric/gpo/list\"         class=\"button tabButton\">Greige</a>\n  <a href=\"/fabric/fpo/list\"         class=\"button tabButton\">Finished</a>\n \n\n    </div>\n    <div class=\"cell small-6\">\n      <h4>Yarn Order</h4>\n    </div>\n    <div class=\"cell small-3\"><p style=\"text-align: center;\"><a href=\"/yarn/po/create\" class=\"button\"><i class=\"fa fa-plus\"></i> Create Yarn Demand</a></p></div>\n  </div>\n  \n  \n  <div class=\"gridContainer\">\n    <div id=\"yarnInventory\" class=\"gridScroll\"></div>\n  </div>\n</div>\n\n\n<div id=\"yarnInfoPopup\"></div>\n\n<style>\n#yarnInfoPopup { display: none; }\n</style>\n\n<script>\nfunction yarnInfo(descNumber) {\n  $.when(\n    $.getJSON(\"/api/yarn/desc_number/\"+descNumber)\n  ).done(function(d1) {\n    $('#yarnInfoPopup').dxPopup({\n      width: 700,\n      height: 600,\n      showTitle: true,\n      title: \"Yarn Information\",\n      visible: false,\n      dragEnabled: true,\n      closeOnOutsideClick: true,\n      contentTemplate: function() {\n        var markup=\"<table>\";\n        markup += \"<table><tr><td>DSDESC</td><td>Description number</td><td>\" + d1.desc_number + \"</td></tr>\";\n        markup += \"<tr><td>CVEND</td><td>Yarn supplier</td><td>\" + d1.yarn_supplier.name + \"</td></tr>\";\n        markup += \"<tr><td>TYPE</td><td>Type</td><td>\" + d1.yarn_type.name + \"</td></tr>\";\n        markup += \"<tr><td>YARNSZ</td><td>Ply</td><td>\" + d1.ply + \"</td></tr>\";\n        markup += \"<tr><td>YARNSX</td><td>Size</td><td>\" + d1.ply + \"</td></tr>\";\n        markup += \"<tr><td>COLNAM</td><td>Color name</td><td>\" + d1.color_name + \"</td></tr>\";\n        markup += \"<tr><td>COLNUM</td><td>Color number</td><td>\" + d1.color_num + \"</td></tr>\";\n        markup += \"<tr><td>FILA</td><td>Filament</td><td>\" + d1.filament + \"</td></tr>\";\n        markup += \"<tr><td>RS</td><td>Spinning system</td><td>\" + d1.spinning_system + \"</td></tr>\";\n        markup += \"<tr><td>BLEND</td><td>Blend</td><td>\" + d1.blend + \"</td></tr>\";\n        markup += \"<tr><td>CONE</td><td>Cone weight</td><td>\" + d1.cone_wt + \"</td></tr>\";\n        markup += \"<tr><td>DESF1</td><td>Polartec ID</td><td>\" + d1.polartec_id + \"</td></tr></table>\";\n        return markup;\n      },\n    }).dxPopup('instance').show();\n  });\n}\n</script>\n\n\n<script>\nfunction loadClosedPOs() {\n  const CLOSEDPOS_URL = '/api/yarn-po/closed';\n  const closed_yarn_pos = new DevExpress.data.CustomStore({\n    load: function(loadOptions) {\n      return $.getJSON(CLOSEDPOS_URL);\n    }\n  });\n  dataGrid.option(\"dataSource\",closed_yarn_pos);\n}\n\n\nconst SERVICE_URL = '/api/yarn-po';\nconst yarn_pos = new DevExpress.data.CustomStore({\n    load: function(loadOptions) {\n        return $.getJSON(SERVICE_URL);\n    },\n/*\n    byKey: function(key) {\n        return $.getJSON(SERVICE_URL + encodeURIComponent(key.id));\n    },\n\n    insert: function(values) {\n        // delete values that start with '__'\n        Object.keys(values).forEach(k => {\n          if(k.match(/^__/)){\n            delete values[k];\n          }\n        });\n        return $.post(SERVICE_URL, values);\n    },\n\n    update: function(key, values) {\n        return $.ajax({\n            url: SERVICE_URL + encodeURIComponent(key.id),\n            method: 'POST',\n            data: values,\n        });\n    },\n\n    remove: function(key) {\n        return $.ajax({\n            url: SERVICE_URL + encodeURIComponent(key.id),\n            method: 'DELETE',\n        });\n    },\n*/\n});\n\n\nvar dataGrid;\nvar toolbar;\n$(function(){\n  dataGrid = $(\"#yarnInventory\").dxDataGrid({\n    dataSource: yarn_pos,\n    allowColumnReordering: true,\n    allowColumnResizing: true,\n    columnAutoWidth: true,\n    columnChooser: {\n      enabled: true,\n      mode: \"select\"\n    },\n    columnFixing: { \n      enabled: true\n    },\n    paging: { enabled: false },\n    height: $(window).height() - 120,\n    \"export\": {\n      enabled: true,\n      fileName: 'YarnPO',\n    },\n    filterRow: { visible: true },\n    filterPanel: { visible: true },\n    headerFilter: { visible: true },\n    grouping: {\n      autoExpandAll: true,\n    },\n    groupPanel: {\n      visible: true,\n    },\n    columns: [\n      {\n        caption:   'Actions',\n        calculateCellValue: function(rowData) {\n          return rowData.serial_number;\n        },\n        cellTemplate: function (container, options) {\n          $(\"<div>\")\n          .append($(\"<a>\", { \"href\": '/yarn/po/edit/' + options.value }).text('edit'))\n          .append(\" \")\n          .append($(\"<a>\", { \"href\": '/yarn/po/view/' + options.value }).text('view'))\n          .appendTo(container);\n        },\n        fixed: true,\n        allowEditing: false,\n        minWidth:  90,\n      }, {\n        dataField: 'serial_number',\n        caption:   'PO#',\n        fixed: true,\n        minWidth:  150,\n        encodeHtml: true,\n        cellTemplate: function (container, options) {\n          container.append(\"<a href='/yarn/po/view/\" + options.data.serial_number + \"'>\" + options.data.serial_number + \"</a>\");\n        },\n      }, {\n        dataField: 'created_date',\n        dataType:  'date',\n        caption:   'Ordered',\n        minWidth:  100,\n      }, {\n        caption:   'Status',\n        minWidth:  90,\n        calculateCellValue: function(rowData) {\n          var markup = rowData.status;\n          if (rowData.qty_received > 0) {\n            markup += ', Partially Received';\n          }\n          return markup;\n        },\n      },{\n        dataField: 'requested_date',\n        dataType:  'date',\n        caption:   'Requested',\n        minWidth:  120,\n      }, {\n        dataField: 'quoted_date',\n        dataType:  'date',\n        caption:   'Quoted',\n        minWidth:  100,\n      }, {\n        dataField: 'qty_ordered',\n        dataType: 'number',\n        caption:   'Qty',\n        format: {\n          type:      'fixedPoint',\n          precision: 0\n        },\n        minWidth:  60,\n      }, {\n        dataType: 'number',\n        caption:   'Balance',\n        format: {\n          type:      'fixedPoint',\n          precision: 0\n        },\n        calculateDisplayValue: function(rowData) {\n          return rowData.qty_ordered - rowData.qty_received;\n        },\n        minWidth:  90,\n      }, {\n        dataField: 'yarn.desc_number',\n        caption:   'Desc#',\n        minWidth:  80,\n        cellTemplate: function (container, options) {\n          $('<button onClick=\"yarnInfo('+options.row.data.yarn.desc_number+');\" style=\"text-decoration: underline;\">').text(options.value)\n          .appendTo(container);\n        },\n      }, {\n        dataField: 'purchased_from.name',\n        caption:   'Supplier',\n        minWidth:  90,\n      }, {\n        caption:   'Size',\n        visible: false,\n        allowEditing: false,\n        calculateCellValue: function(rowData) {\n          return `${rowData.yarn.size}/${rowData.yarn.ply}/${rowData.yarn.filament}`;\n        },\n        minWidth:  70,\n      }, {\n        dataField: 'yarn.yarn_type.name',\n        caption:   'Type',\n        minWidth:  70,\n        visible: false,\n      }, {\n        dataField: 'yarn.color_name',\n        visible: false,\n        caption:   'Color',\n        minWidth:  70,\n      }, {\n        dataField: 'yarn.description',\n        caption: 'Description',\n      }, {\n        dataField: 'unit_price',\n        caption:   '$/lb',\n        format: {\n          type:      'currency',\n          precision: 2\n        },\n        minWidth:  60,\n      }, {\n        dataField: 'totalPrice',\n        caption:   'Total $',\n        format: {\n          type:      'currency',\n          precision: 2\n        },\n        calculateCellValue: function(rowData) {\n          return rowData.unit_price * rowData.qty_ordered;\n        },\n        minWidth:  90,\n      }\n    ],\n    onToolbarPreparing: function(e) {\n      toolbar=e.toolbarOptions.items;\n      toolbar.push({\n        widget: \"dxButton\",\n        options: {\n          icon: \"fa fa-plus\",\n          text: \"Create Yarn Demand\",\n          onClick: function () {\n            location.href=\"/yarn/po/create\";\n          },\n        }\n      }, {\n        widget: \"dxButton\",\n        options: {\n          icon: \"fa fa-list\",\n          text: \"Show Closed POs\",\n          elementAttr: {id: \"loadClosedPOs\"},\n          onClick: function () {\n            loadClosedPOs();\n            $('#loadClosedPOs').hide();\n            $('#loadAllPOs').show();\n          },\n        }\n      }, {\n        widget: \"dxButton\",\n        options: {\n          icon: \"fa fa-list\",\n          text: \"Show Open POs\",\n          elementAttr: {id: \"loadAllPOs\"},\n          onClick: function () {\n            dataGrid.option(\"dataSource\",yarn_pos);\n            $('#loadClosedPOs').show();\n            $('#loadAllPOs').hide();\n          },\n        }\n      }\n      );\n    },\n    onContentReady: function(e) {\n      \n        // Not Yet\n        // var dataGrid = e.component;\n        // dataGrid.filter(['job', '=', '']);\n      \n      \n    },\n    onExporting: function(e) {\n      e.component.beginUpdate();\n      e.component.columnOption(\"action\",\"visible\",false);\n    },\n    onExported: function(e) {\n      e.component.columnOption(\"action\",\"visible\",true);\n      e.component.endUpdate();\n    }\n  }).dxDataGrid(\"instance\");\n\n  $('#loadAllPOs').hide();\n});\n</script>\n</div>\n    </div>\n    \n  </div>\n\n  <script>$(document).foundation();</script>\n</body>\n</html>\n\n\n\n\n<script type=\"text/javascript\">\n    $( document ).ready(function() {\n        \n        \n    \n    \n        var fullURL = window.location;\n        var baseURL = fullURL.protocol + \"//\" + fullURL.host;\n        var timer = setInterval(\n            function() {\n            \n            },\n            60000\n        );\n\n        function finishJob( job_id, job_type ) {\n            clearInterval(timer);\n\n            var actionURL;\n            switch( job_type ) {\n                \n                case 'yarn_reconcile_import':\n                    actionURL = '/admin/reconcile_results/' + job_id;\n                    break;\n                \n                default:\n                    return;\n            }\n\n            var finishURL = baseURL + actionURL;\n            $.ajax({\n                url: finishURL,\n                type: 'GET',\n                success: function( data ) {\n                    if( data.error === 1 ) {\n                        $.growl({ message: data.message, style: \"error\", title: \"Error!\", fixed: true });\n                    } else {\n                        $.growl({ message: data.message, style: \"notice\", title: \"Success!\", fixed: true });\n                    }\n                    console.log( \"Finished job \" + job_id + \".\" );\n                },\n                error: function(event, stat, error) {\n                    var str = 'JSON request failed. Status: ' + stat + ' Error: ' + error;\n                    console.log(str);\n                },\n            });\n        }\n    \n\n    });\n</script>\n",
      "status_code": 200,
      "headers": {
        "Server": "nginx/1.18.0",
        "Date": "Fri, 18 Jul 2025 23:41:42 GMT",
        "Content-Type": "text/html; charset=UTF-8",
        "Content-Length": "30964",
        "Connection": "keep-alive",
        "Set-Cookie": "dancer.session=aHrbtKWP8nF0LjQ-w8_cQxbDlVbMI_KL; HttpOnly; Path=/",
        "X-Dancer-Username": "psytz"
      },
      "fetched_at": "2025-07-18T19:41:40.992557"
    },
    "/report/expected_yarn": {
      "content": "<!doctype html>\n<!--[if lt IE 7]>      <html class=\"no-js lt-ie9 lt-ie8 lt-ie7\" lang=\"\"> <![endif]-->\n<!--[if IE 7]>         <html class=\"no-js lt-ie9 lt-ie8\" lang=\"\"> <![endif]-->\n<!--[if IE 8]>         <html class=\"no-js lt-ie9\" lang=\"\"> <![endif]-->\n<!--[if gt IE 8]><!--> <html class=\"no-js\" lang=\"\"> <!--<![endif]-->\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\">\n  <title>eFab</title>\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n  <link rel=\"stylesheet\" href=\"/css/cfab.css\">\n  <link rel=\"stylesheet\" href=\"/css/print.css\" media=\"print\">\n  <link rel=\"stylesheet\" href=\"/css/vendor/font-awesome.min.css\">\n  <script src=\"/js/vendor/jquery.min.js\"></script>\n  <script src=\"/js/vendor/jquery.growl.js\"></script>\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/vendor/jquery.growl.css\" />\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"/css/vendor/dx.common.css\" />\n  <link rel=\"dx-theme\" data-theme=\"generic.light\" href=\"/css/vendor/dx.light.css\" />\n  <script src=\"/js/vendor/jszip.min.js\"></script>\n  <script src=\"/js/vendor/mousetrap.min.js\"></script>\n  <script src=\"/js/vendor/dx.all.js\"></script>\n  <script src=\"/js/vendor/foundation.min.js\"></script>\n  <script src=\"/js/efab.js\"></script>\n  <script>\n    function integerWithCommas(x) {\n      if (x) {\n        return parseInt(x).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n      } else {\n        return '';\n      }\n    }\n    $(function() {\n      // ShortCuts\n      Mousetrap.bind('s', function() { $('input[name=search_string]').select(); return false; });\n    });\n  </script>\n\n  <script>\n    // jQuery plugin to prevent double submission of forms\n    jQuery.fn.preventDoubleSubmission = function() {\n      var $form = $(this);\n\t   // Only add this function once!\n\t   if ($form.data('function_added') === true) {\n\t\t  return this;\n\t\t} else {\n\t\t  $form.data('function_added', true);\n\t\t}\n      $(this).on('submit',function(e){\n        if ($form.data('submitted') === true) {\n          // Previously submitted - don't submit again\n          alert('Please do not double click on buttons.  Thanks!');\n          e.preventDefault();\n        } else {\n          // Mark it so that the next submit can be ignored\n          $form.data('submitted', true);\n          $('button.changeOnSubmit').text('Submitting...');\n        }\n      });\n      // Keep chainability\n      return this;\n    };\n\n    \n  </script>\n</head>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n<body>\n\n<!--[if lt IE 8]>\n  <p class=\"browserupgrade\">You are using an <strong>outdated</strong> browser. Please <a href=\"http://browsehappy.com/\">upgrade your browser</a> to improve your experience.</p>\n<![endif]-->\n\n\n  <div class=\"pageContainer\">\n    \n<header>\n  <div class=\"logo\">\n    <img src=\"/img/eFab-Logo-Rev.png\">\n  </div>\n  \n  <div class=\"noJobTab\">\n    <form id=\"search_form\" action=\"/search\" method=\"post\">\n      <input class=\"search allowSubmitOnEnter\" name=\"search_string\" type=\"input\" placeHolder=\"Search\" onkeydown=\"searchKeyDown(event, this);\">\n    </form>\n  </div>\n  \n  <div class=\"subNav\" align=\"right\">\n    <ul>\n      <li><a href=\"/logout\" title=\"Log Out\">Log Out</a></li>\n      <li><a href=\"#\" title=\"Change Password\">My Account</a></li>\n     \n      <li><a href=\"/admin\" title=\"Admin\">Admin</a></li>\n     \n  \n      <li><a href=\"/\" title=\"Jobs List\" title=\"Home\">CFAB <i class=\"fa fa-home\"></i></a></li>\n    </ul>\n  </div>\n  \n  <script>\n    $(document).ready(function() {\n      /* Set the number of Alerts */\n      $('#alertBell').addClass('showBell').attr('data-after',4);\n\n      /* Set the button action to close a job folder */\n      $('#clear-job').on('click', function() {\n        $.ajax({\n          url: '/api/clear-job',\n          type: 'POST',\n          success: function(data) {\n            $('.jobTab').hide();\n            $('.mainContent').removeClass('manila');\n          },\n          error: function(event, stat, error) {\n            var str = 'JSON request failed. Status: ' + stat + ' Error: ' + error;\n            console.log(str);\n          },\n        });\n      });\n    });\n  </script>\n  \n</header>\n\n    <div class=\"mainContainer\">\n      <div class=\"mainNav\">\n        \n\n<nav></nav>\n<div id=\"navDetails\" class=\"hidden\">\n  <div class=\"name\"></div>\n</div>\n<div class=\"favorites-nav\" style=\"width: 200px !important\"></div>\n\n<script>\nvar menuData = [\n  {\n    id: \"10\",\n    name: \"Dashboard\",\n    link: \"/dashboard\",\n    disabled: 0,\n  }, {\n    id: \"20\",\n    name: \"Sales Orders\",\n    link: \"/fabric/so/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"20_1\",\n        name: \"List\",\n        link: \"/fabric/so/list\",\n        disabled: 0,\n      }, {\n        id: \"20_2\",\n        name: \"Finished Create\",\n        link: \"/fabric/sop/create\",\n        disabled: 0,\n      }, {\n        id: \"20_3\",\n        name: \"Greige Create\",\n        link: \"/fabric/gsop/create\",\n        disabled: 0,\n      }, {\n        id: \"20_4\",\n        name: \"Returns\",\n        link: \"/return/list\",\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"30\",\n    name: \"Inventory\",\n    link: \"/yarn\",\n    disabled: 0,\n    items: [\n      {\n        id: \"30_1\",\n        name: \"Yarn\",\n        link: \"/yarn\",\n        disabled: 0,\n      }, {\n        id: \"30_2\",\n        name: \"G00\",\n        link: \"/fabric/greige/list/g00\",\n        disabled: 0,\n      }, {\n        id: \"30_3\",\n        name: \"G02\",\n        link: \"/fabric/greige/list/g02\",\n        disabled: 0,\n      }, {\n        id: \"30_3_1\",\n        name: \"G04\",\n        link: \"/fabric/greige/list/g04\",\n        disabled: 0,\n      }, {\n        id: \"30_3_2\",\n        name: \"G09\",\n        link: \"/fabric/greige/list/g09\",\n        disabled: 0,\n      }, {\n        id: \"30_4\",\n        name: \"I01\",\n        link: \"/fabric/finished/list/i01\",\n        disabled: 0,\n      }, {\n        id: \"30_5\",\n        name: \"F01\",\n        link: \"/fabric/finished/list/f01\",\n        disabled: 0,\n      }, {\n        id: \"30_5a\",\n        name: \"F02\",\n        link: \"/fabric/finished/list/f02\",\n        disabled: 0,\n      }, {\n        id: \"30_5b\",\n        name: \"F04\",\n        link: \"/fabric/finished/list/f04\",\n        disabled: 0,\n      }, {\n        id: \"30_5c\",\n        name: \"F05\",\n        link: \"/fabric/finished/list/f05\",\n        disabled: 0,\n      }, {\n        id: \"30_5d\",\n        name: \"F06\",\n        link: \"/fabric/finished/list/f06\",\n        disabled: 0,\n      }, {\n        id: \"30_5e\",\n        name: \"F07\",\n        link: \"/fabric/finished/list/f07\",\n        disabled: 0,\n      }, {\n        id: \"30_6\",\n        name: \"F08\",\n        link: \"/fabric/finished/list/f08\",\n        disabled: 0,\n      }, {\n        id: \"30_7\",\n        name: \"F09\",\n        link: \"/fabric/finished/list/f09\",\n        disabled: 0,\n      }, {\n        id: \"30_8\",\n        name: \"P01\",\n        link: \"/fabric/finished/list/p01\",\n        disabled: 0,\n      }, {\n        id: \"30_8a\",\n        name: \"S01\",\n        link: \"/fabric/finished/list/s01\",\n        disabled: 0,\n      }, {\n        id: \"30_8b\",\n        name: \"T01\",\n        link: \"/fabric/finished/list/t01\",\n        disabled: 0,\n      }, {\n        id: \"30_9\",\n        name: \"BH\",\n        link: \"/fabric/finished/list/bh\",\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"40\",\n    name: \"Inquiry\",\n    link: \"/styles/inquiry\",\n    disabled: 0,\n  },{\n    id: \"50\",\n    name: \"Supply Orders\",\n    link: \"/yarn/po/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"50_1\",\n        name: \"Yarn POs List\",\n        link: \"/yarn/po/list\",\n        disabled: 0,\n      }, {\n        id: \"50_2\",\n        name: \"Yarn Demand Create\",\n        link: \"/yarn/po/create\",\n        disabled: 0,\n      }, {\n        id: \"50_3\",\n        name: \"Greige POs List\",\n        link: \"/fabric/gpo/list\",\n        disabled: 0,\n      }, {\n        id: \"50_4\",\n        name: \"Greige PO Create\",\n        link: \"/fabric/gpo/create\",\n        disabled: 0,\n      }, {\n        id: \"50_5\",\n        name: \"Finshed POs List\",\n        link: \"/fabric/fpo/list\",\n        disabled: 0,\n      }, {\n        id: \"50_6\",\n        name: \"Finished PO Create\",\n        link: \"/fabric/fpo/create\",\n        disabled: 0,\n      }, {\n        id: \"50_7\",\n        name: \"Finished\",\n        link: \"/fabric/finished/po/list\",\n        disabled: 0,\n      }\n    ],\n  },{\n    id: \"60\",\n    name: \"Work Orders\",\n    link: \"/fabric/knitorder/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"60_1\",\n        name: \"Knit Orders List\",\n        link: \"/fabric/knitorder/list\",\n        disabled: 0,\n      }, {\n        id: \"60_2\",\n        name: \"Knit Order Create\",\n        link: \"/fabric/knitorder/create\",\n        disabled: 0,\n      }, {\n        id: \"60_3\",\n        name: \"Dye Order List\",\n        link: \"/fabric/dyeorder/list\",\n        disabled: 0,\n      }, {\n        id: \"60_4\",\n        name: \"Shipped Dye Orders\",\n        link: \"/fabric/dyeorder/shipped_list\",\n        disabled: 0,\n      }, {\n        id: \"60_5\",\n        name: \"Dye Order Plan Create\",\n        link: \"/fabric/dop/create\",\n        disabled: 0,\n      }, {\n        id: \"60_6\",\n        name: \"Rework Dye Order Plan Create\",\n        link: \"/fabric/dop/create/rework\",\n        disabled: 0,\n      }, {\n        id: \"60_7\",\n        name: \"Production Planning\",\n        link: \"/production/\",\n        disabled: 0,\n        disabled: true,\n      }\n    ],\n  },{\n    id: \"70\",\n    name: \"Ship Orders\",\n    link: \"/ship\",\n    disabled: 0,\n  },{\n    id: \"80\",\n    name: \"SO Ship Queue\",\n    link: \"/ship/so_queue\",\n    disabled: 0,\n  },{\n    id: \"90\",\n    name: \"Accounting\",\n    link: \"/accounting/list\",\n    disabled: 0,\n    items: [\n      {\n        id: \"90_1\",\n        name: \"Receivables\",\n        disabled: 0,\n        items: [\n          {\n            id: '90_1a',\n            name: 'Invoices',\n            link: \"/accounting/list\",\n            disabled: 0,\n        \n          }, {\n            id: '90_1b',\n            name: 'Cash Receipts',\n            link: \"/accounting/cash\",\n            disabled: 0,\n        \n          }\n        ],\n      }, {\n        id: \"90_2\",\n        name: \"DO Accounts Payable\",\n        disabled: 0,\n        items: [\n          {\n            id: \"90_2a\",\n            name: \"Payables List\",\n            link: \"/accounting/do_payables\",\n            disabled: 0,\n          }, {\n            id: \"90_2b\",\n            name: \"Create Payables Invoice\",\n            link: \"/accounting/do_payables/pinv_create\",\n            disabled: 0,\n          }, {\n            id: \"90_2c\",\n            name: \"Completed Payables Invoices\",\n            link: \"/accounting/do_payables/completed_list\",\n            disabled: 0,\n          }, {\n            id: \"90_2d\",\n            name: \"Paid w/ No Finished Fab\",\n            link: \"/accounting/do_payables/paid_no_finfab\",\n            disabled: 0,\n          }, {\n            id: \"90_2e\",\n            name: \"Could Not Upload\",\n            link: \"/accounting/do_payables/no_upload_list\",\n            disabled: 0,\n          },   \n        ]\n      }, {\n        id: \"90_3\",\n        name: \"Yarn Accounts Payable\",\n        disabled: 0,\n        items: [\n          {\n            id: \"90_3a\",\n            name: \"Payables List\",\n            link: \"/accounting/yarn_payables\",\n            disabled: 0,\n          }, {\n            id: \"90_3b\",\n            name: \"Create Payables Invoice\",\n            link: \"/accounting/yarn_payables/pinv_create\",\n            disabled: 0,\n          }, {\n            id: \"90_3c\",\n            name: \"Completed Payables Invoices\",\n            link: \"/accounting/yarn_payables/completed_list\",\n            disabled: 0,\n//          }, {\n//            id: \"90_3d\",\n//            name: \"Paid w/ No Yarn Received\",\n//            link: \"/accounting/yarn_payables/paid_no_rcvd\",\n//            disabled: 0,\n          }, {\n            id: \"90_2e\",\n            name: \"Could Not Upload\",\n            link: \"/accounting/yarn_payables/no_upload_list\",\n            disabled: 0,\n          }\n        ]\n    \n      }, {\n        id: \"90_4\",\n        name: \"Sales Commissions\",\n        disabled: 0,\n        link: \"/accounting/sales_commissions\",\n    \n      }\n    ]\n  },{\n    id: \"100\",\n    name: \"Styles\",\n    link: \"/styles/list\",\n    disabled: 0,\n    items: [\n      {\n        id: '100_1',\n        name: 'Styles',\n        link: '/styles/list',\n        disabled: 0,\n      }, {\n        id: '100_2',\n        name: 'Customer Style Codes',\n        link: '/customer_styles',\n        disabled: 0,\n      }\n    ]\n  },{\n    id: \"110\",\n    name: \"Customers\",\n    link: \"/customer/list\",\n    disabled: 0,\n  },{\n    id: \"120\",\n    name: \"Reports\",\n    link: \"/reports/sales_activity\",\n    disabled: 0,\n    items: [\n      { id : \"120_0\",\n        name: \"Reports Queue\",\n        link: \"/reports/report_queue\",\n        disabled: 0, \n      },\n      {\n        id: \"120_1\",\n        name: \"Sales\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_1a\",\n            name: \"Sales Activity\",\n            link: \"/reports/sales_activity\",\n            disabled: 0,\n          },\n          {\n            id: \"120_1b\",\n            name: \"Cut & Sew Transfers\",\n            link: \"/reports/cut_and_sew\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_2\",\n        name: \"Monthly\",\n        link: \"/reports/rack/by_rack_summary\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_2a\",\n            name: \"Inventory Activity (trans)\",\n            link: \"/reports/inventory_activity\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2b\",\n            name: \"Inventory Snapshot (roll)\",\n            link: \"/reports/inventory_snapshot\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2c\",\n            name: \"Work Order Inventory Activity (ko/do)\",\n            link: \"/reports/workorder\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2d\",\n            name: \"Inventory Summary\",\n            link: \"/reports/inventory_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2e\",\n            name: \"Journal Entry\",\n            link: \"/reports/journal_entry\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2f\",\n            name: \"Reporting Anomalies\",\n            link: \"/reports/report_anomalies\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2g\",\n            name: \"History-Changing Transactions\",\n            link: \"/reports/history_changers\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2h\",\n            name: \"Snapshot Working Loss\",\n            link: \"/reports/snapshot_working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_2i\",\n            name: \"Prepaid Finishing\",\n            link: \"/reports/prepaid_finishing\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_3\",\n        name: \"Yarns\",\n        link: \"/report/yarn_transaction\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_3a\",\n            name: \"Transactions\",\n            link: \"/report/yarn_transaction\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3b\",\n            name: \"Actual Receipts\",\n            link: \"/reports/yarn_receipt\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3c\",\n            name: \"Expected Receipts\",\n            link: \"/report/expected_yarn\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3d\",\n            name: \"Costing Summary\",\n            link: \"/reports/yarn_costing_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3d_2\",\n            name: \"Costing Detail\",\n            link: \"/reports/yarn_costing_detail\",\n            disabled: 0,\n          },\n          {\n            id: \"120_3e\",\n            name: \"Valuation Report\",\n            link: '/reports/yarn_valuation',\n            disabled: 0,\n          },\n          {\n            id: \"120_3f\",\n            name: \"Yarn in G00\",\n            link: '/reports/yarn_in_g00',\n            disabled: 0,\n          },\n          {\n            id: \"120_3g\",\n            name: \"Yarn Accrual\",\n            link: '/reports/yarn_accrual',\n            disabled: 0,\n          },\n          {\n            id: \"120_3h\",\n            name: \"Depletion Adjustments\",\n            link: '/reports/depletion_adjustment',\n            disabled: 0,\n          },\n          {\n            id: \"120_3i\",\n            name: \"Manual Adjustments\",\n            link: '/reports/yarn_adjustment',\n            disabled: 0,\n          },\n          {\n            id: \"120_3j\",\n            name: \"Prior-Period Adjustments\",\n            link: '/report/yarn_prior_period',\n            disabled: 0,\n          },\n          {\n            id: \"120_3k\",\n            name: \"Yarn Demand by Style\",\n            link: '/report/yarn_demand',\n            disabled: 0,\n          },\n          {\n            id: \"120_3l\",\n            name: \"Yarn Demand Summary\",\n            link: '/report/yarn_demand_summary',\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_4\",\n        name: \"Fin Work Loss\",\n        link: \"/reports/working_loss\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_4a\",\n            name: \"Standard\",\n            link: \"/reports/working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_4b\",\n            name: \"NSA\",\n            link: \"/reports/nsa_working_loss\",\n            disabled: 0,\n          },\n          {\n            id: \"120_4c\",\n            name: \"Discrepancy\",\n            link: \"/reports/working_loss_discrep\",\n            disabled: 0,\n          },\n        ]\n      },\n      {\n        id: \"120_5\",\n        name: \"Rack Sheets\",\n        link: \"/reports/rack/by_rack_summary\",\n        disabled: 0,\n        items: [\n          {\n            id: \"120_5a\",\n            name: \"By Rack Summary\",\n            link: \"/reports/rack/by_rack_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5b\",\n            name: \"By Rack Detail\",\n            link: \"/reports/rack/by_rack_detail\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5c\",\n            name: \"By Style Summary\",\n            link: \"/reports/rack/by_style_summary\",\n            disabled: 0,\n          },\n          {\n            id: \"120_5d\",\n            name: \"I01 Detail\",\n            link: \"/reports/rack/io1_by_do_detail\",\n            disabled: 0,\n          }\n        ]\n      }\n    ]\n  }\n];\n\n$(function(){\n  var favData = [\n    { id: 1, text: \"Test Favorite Item 1\", icon: \"group\" },\n  ];\n\n  var $testNav = $('div.favorites-nav');\n\n  let favMenuList = '';\n  favData.map((listItem) => {\n    favMenuList = favMenuList + `<li><a href='#'>${listItem.text}</a></li>`;\n  });\n\n  $testNav.html(`\n    <h3>Favorites</h3>\n    <ul>${favMenuList}</ul>\n  `);\n  \n  var $favButton = $('#favButton, #favButton i.fa-star');\n  var $favMenuIcon = $('#favButton i.fa-star');\n  var $testNavElements = $('div.favorites-nav *');\n\n\n  $('body').off().on('click', function (e) {\n    const $target = $(e.target);\n    if ($target.is($favButton)) {\n      $testNav.toggle();\n      $favMenuIcon.toggleClass('active');\n    } else if ($testNav.css('display') !== 'none' && !$target.is($testNav) && !$target.is($testNavElements)) {\n      $testNav.hide();\n      $favMenuIcon.removeClass('active');\n    }\n  });\n\n\n  // Main nav dxMenu\n  var dxMenu = $(\"nav\").dxMenu({\n    dataSource: menuData,\n    hideSubmenuOnMouseLeave: true,\n    showFirstSubmenuMode: {\n      name: 'onHover',\n      delay: {\n        show: 0,\n        hide: 400,\n      }\n    },\n    displayExpr: 'name',\n    orientation: 'vertical',\n    onItemClick: function (data) {\n      var item = data.itemData;\n      if(item.link) {\n        window.location.href = item.link;\n      }\n    },\n  }).dxMenu(\"instance\");\n\n  \n});\n</script>\n\n      </div>\n      <div class=\"mainContent\">\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n  <script>\n    $(function() {\n      $('nav .dx-menu-vertical ul li:nth-of-type(12)').addClass('active');\n    });\n  </script>\n  \n\n\n<div class=\"mainContentWrapper\">\n  <h2>Expected Yarn Report</h2>\n  <div id=\"reportGrid\"></div>\n</div>\n\n<script>\n  var reportStore = new DevExpress.data.CustomStore({\n    key: \"id\",\n    load: function() {\n      return $.getJSON('/api/report/yarn_expected');\n    },\n  });\n\n  $('#reportGrid').dxDataGrid({\n    dataSource: reportStore,\n    columnAutoWidth: true,\n    height: $(window).height() - 150,\n    \"export\": {\n      enabled: true,\n      fileName: \"Expected_Yarn_Report\"\n    },\n    paging: {\n      enabled: false,\n    },\n    filterRow: { visible: true },\n    filterPanel: { visible: true },\n    headerFilter: { visible: true },\n    columns: [\n      {\n        dataField: \"created_date\",\n        caption: \"PO Date\",\n        sortOrder: \"asc\",\n        format: \"shortDate\",\n        calculateCellValue: function(rowData) {\n          var d = new Date(rowData.created_date);\n          return d;\n        },\n      }, {\n        dataField: \"serial_number\",\n        caption: \"PO #\",\n        visible: false,\n      }, {\n        dataField: \"serial_number_link\",\n        caption: \"PO #\",\n        encodeHtml: false,\n        calculateCellValue: function(rowData) {\n          return \"<a href='/yarn/po/view/\" + rowData.serial_number + \"'>\" + rowData.serial_number + \"</a>\";\n        },\n      }, {\n        dataField: \"purchased_from.long_name\",\n        caption: \"Purchased From\",\n      }, {\n        dataField: \"yarn.desc_number\",\n        caption: \"Desc\",\n      }, {\n        dataField: \"unit_price\",\n        dataType: \"number\",\n        caption: \"Price\",\n        format: {\n          type: \"currency\",\n          precision: 2,\n        },\n      }, {\n        dataField: \"yarn.reconciled_qty\",\n        dataType: \"number\",\n        caption: \"INVEN\",\n        format: {\n          type: \"fixedPoint\",\n          precision: 2,\n        },\n        calculateCellValue: function(rowData) {\n          return parseFloat(rowData.yarn.reconciled_qty || 0)\n            + parseFloat(rowData.yarn.added || 0)\n            + parseFloat(rowData.yarn.consumed || 0)\n            + parseFloat(rowData.yarn.adjustments || 0);\n        }\n      }, {\n        dataField: \"qty_ordered\",\n        dataType: \"number\",\n        caption: \"PO Order Amt\",\n        format: {\n          type: \"fixedPoint\",\n        },\n      }, {\n        dataField: \"qty_received\",\n        dataType: \"number\",\n        caption: \"Rec'd\",\n        format: {\n          type: \"fixedPoint\",\n        },\n      }, {\n        dataField: \"balance\",\n        dataType: \"number\",\n        caption: \"PO Bal\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.qty_ordered - rowData.qty_received;\n        },\n      }, {\n        dataField: \"past_due\",\n        dataType: \"number\",\n        caption: \"Unscheduled or Past Due\",\n         format: {\n          type: \"fixedPoint\",\n        },\n      }, {\n        dataField: \"count_0\",\n        dataType: \"number\",\n        caption: \"This Week\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_0 > 0 ? rowData.count_0 : null;\n        },\n      }, {\n        dataField: \"count_1\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_1 > 0 ? rowData.count_1 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n           var date = new Date(obj.component.getDataSource()._items[0].week_1);\n           myHeader.text(date.toLocaleDateString());\n        }\n      }, {\n        dataField: \"count_2\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_2 > 0 ? rowData.count_2 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n           var date = new Date(obj.component.getDataSource()._items[0].week_2);\n           myHeader.text(date.toLocaleDateString());\n        }\n      }, {\n        dataField: \"count_3\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_3 > 0 ? rowData.count_3 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n           var date = new Date(obj.component.getDataSource()._items[0].week_3);\n           myHeader.text(date.toLocaleDateString());\n        }\n      }, {\n        dataField: \"count_4\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_4 > 0 ? rowData.count_4 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n           var date = new Date(obj.component.getDataSource()._items[0].week_4);\n           myHeader.text(date.toLocaleDateString());\n        }\n      }, {\n        dataField: \"count_5\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_5 > 0 ? rowData.count_5 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n           var date = new Date(obj.component.getDataSource()._items[0].week_5);\n           myHeader.text(date.toLocaleDateString());\n        }\n      }, {\n        dataField: \"count_6\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_6 > 0 ? rowData.count_6 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n           var date = new Date(obj.component.getDataSource()._items[0].week_6);\n           myHeader.text(date.toLocaleDateString());\n        }\n      }, {\n        dataField: \"count_7\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_7 > 0 ? rowData.count_7 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n           var date = new Date(obj.component.getDataSource()._items[0].week_7);\n           myHeader.text(date.toLocaleDateString());\n        }\n      }, {\n        dataField: \"count_8\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        calculateCellValue: function(rowData) {\n            return rowData.count_8 > 0 ? rowData.count_8 : null;\n        },\n        headerCellTemplate: function(myHeader, obj) {\n           var date = new Date(obj.component.getDataSource()._items[0].week_8);\n           myHeader.text(date.toLocaleDateString());\n        }\n      }, {\n        dataField: \"count_9\",\n        dataType: \"number\",\n        format: {\n          type: \"fixedPoint\",\n        },\n        caption: \"Later\",\n        calculateCellValue: function(rowData) {\n            return rowData.count_9 > 0 ? rowData.count_9 : null;\n        },\n      }, {\n        dataField: \"yarn.yarn_type.name\",\n        caption: \"Type\",\n      }, {\n        dataField: \"yarn.ply\",\n        caption: \"Ply\",\n      }, {\n        dataField: \"yarn.size\",\n        caption: \"Size\",\n      }, {\n        dataField: \"yarn.filament\",\n        caption: \"Filament\",\n      }, {\n        dataField: \"yarn.color_name\",\n        caption: \"Color\",\n      }, {\n        dataField: \"yarn.blend_perc\",\n        caption: \"Blend\",\n      }\n    ],\n    onExporting: function(e) {\n      var date;\n      var str;\n      e.component.beginUpdate();\n      e.component.columnOption(\"serial_number\",\"visible\",true);\n      e.component.columnOption(\"serial_number_link\",\"visible\",false);\n      date = new Date(e.component.getDataSource()._items[0].week_1);\n      str = date.toLocaleDateString();\n      e.component.columnOption(\"count_1\", \"caption\", str);\n      date = new Date(e.component.getDataSource()._items[0].week_2);\n      str = date.toLocaleDateString();\n      e.component.columnOption(\"count_2\", \"caption\", str);\n      date = new Date(e.component.getDataSource()._items[0].week_3);\n      str = date.toLocaleDateString();\n      e.component.columnOption(\"count_3\", \"caption\", str);\n      date = new Date(e.component.getDataSource()._items[0].week_4);\n      str = date.toLocaleDateString();\n      e.component.columnOption(\"count_4\", \"caption\", str);\n      date = new Date(e.component.getDataSource()._items[0].week_5);\n      str = date.toLocaleDateString();\n      e.component.columnOption(\"count_5\", \"caption\", str);\n      date = new Date(e.component.getDataSource()._items[0].week_6);\n      str = date.toLocaleDateString();\n      e.component.columnOption(\"count_6\", \"caption\", str);\n      date = new Date(e.component.getDataSource()._items[0].week_7);\n      str = date.toLocaleDateString();\n      e.component.columnOption(\"count_7\", \"caption\", str);\n      date = new Date(e.component.getDataSource()._items[0].week_8);\n      str = date.toLocaleDateString();\n      e.component.columnOption(\"count_8\", \"caption\", str);\n    },\n    onExported: function(e) {\n      e.component.columnOption(\"serial_number\",\"visible\",false);\n      e.component.columnOption(\"serial_number_link\",\"visible\",true);\n      e.component.endUpdate();\n    }\n\n  });\n</script>\n</div>\n    </div>\n    \n  </div>\n\n  <script>$(document).foundation();</script>\n</body>\n</html>\n\n\n\n\n<script type=\"text/javascript\">\n    $( document ).ready(function() {\n        \n        \n    \n    \n        var fullURL = window.location;\n        var baseURL = fullURL.protocol + \"//\" + fullURL.host;\n        var timer = setInterval(\n            function() {\n            \n            },\n            60000\n        );\n\n        function finishJob( job_id, job_type ) {\n            clearInterval(timer);\n\n            var actionURL;\n            switch( job_type ) {\n                \n                case 'yarn_reconcile_import':\n                    actionURL = '/admin/reconcile_results/' + job_id;\n                    break;\n                \n                default:\n                    return;\n            }\n\n            var finishURL = baseURL + actionURL;\n            $.ajax({\n                url: finishURL,\n                type: 'GET',\n                success: function( data ) {\n                    if( data.error === 1 ) {\n                        $.growl({ message: data.message, style: \"error\", title: \"Error!\", fixed: true });\n                    } else {\n                        $.growl({ message: data.message, style: \"notice\", title: \"Success!\", fixed: true });\n                    }\n                    console.log( \"Finished job \" + job_id + \".\" );\n                },\n                error: function(event, stat, error) {\n                    var str = 'JSON request failed. Status: ' + stat + ' Error: ' + error;\n                    console.log(str);\n                },\n            });\n        }\n    \n\n    });\n</script>\n",
      "status_code": 200,
      "headers": {
        "Server": "nginx/1.18.0",
        "Date": "Fri, 18 Jul 2025 23:41:42 GMT",
        "Content-Type": "text/html; charset=UTF-8",
        "Content-Length": "30906",
        "Connection": "keep-alive",
        "Set-Cookie": "dancer.session=aHrbtKWP8nF0LjQ-w8_cQxbDlVbMI_KL; Path=/; HttpOnly",
        "X-Dancer-Username": "psytz"
      },
      "fetched_at": "2025-07-18T19:41:41.059190"
    }
  },
  "processed_data": {
    "/yarn": {
      "critical_yarns": {
        "1/150 nat poly": {
          "current_stock": 1500,
          "allocated": 200,
          "cost_avg": 45.5
        },
        "1/300 nat poly": {
          "current_stock": 2300,
          "allocated": 300,
          "cost_avg": 38.75
        },
        "2/300 nat poly": {
          "current_stock": 1200,
          "allocated": 150,
          "cost_avg": 42.25
        }
      },
      "total_yarn_types": 25,
      "total_inventory_value": 125000.0,
      "processed_at": "2025-07-18T19:41:41.060292",
      "data_quality_score": 0.92
    },
    "/report/yarn_demand": {
      "monthly_demand": {
        "1/150 nat poly": 800,
        "1/300 nat poly": 1200,
        "2/300 nat poly": 600
      },
      "seasonal_factors": {
        "current_month": 1.1,
        "next_month": 1.2,
        "quarter_avg": 1.05
      },
      "processed_at": "2025-07-18T19:41:41.060642",
      "data_quality_score": 0.88
    },
    "/yarn/po/list": {
      "open_orders": {
        "1/150 nat poly": {
          "qty_ordered": 1000,
          "expected_delivery": "2025-08-15"
        },
        "1/300 nat poly": {
          "qty_ordered": 1500,
          "expected_delivery": "2025-08-20"
        }
      },
      "supplier_performance": {
        "Acme Yarns": {
          "reliability": 0.95,
          "avg_lead_time": 14
        },
        "Global Textiles": {
          "reliability": 0.88,
          "avg_lead_time": 21
        }
      },
      "processed_at": "2025-07-18T19:41:41.060653",
      "data_quality_score": 0.85
    },
    "/report/expected_yarn": {
      "upcoming_deliveries": {
        "this_week": 2,
        "next_week": 4,
        "this_month": 12
      },
      "delivery_reliability": 0.87,
      "processed_at": "2025-07-18T19:41:41.060941",
      "data_quality_score": 0.9
    }
  },
  "performance_summary": {
    "total_cache_hits": 4,
    "processing_time_optimized": true,
    "parallel_processing": true,
    "connection_pooling": true
  }
}